{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
        "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
        "followers_url": "https://api.github.com/users/Stannislav/followers",
        "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
        "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Stannislav",
        "id": 8017698,
        "login": "Stannislav",
        "node_id": "MDQ6VXNlcjgwMTc2OTg=",
        "organizations_url": "https://api.github.com/users/Stannislav/orgs",
        "received_events_url": "https://api.github.com/users/Stannislav/received_events",
        "repos_url": "https://api.github.com/users/Stannislav/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Stannislav"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
            "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
            "followers_url": "https://api.github.com/users/Stannislav/followers",
            "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
            "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Stannislav",
            "id": 8017698,
            "login": "Stannislav",
            "node_id": "MDQ6VXNlcjgwMTc2OTg=",
            "organizations_url": "https://api.github.com/users/Stannislav/orgs",
            "received_events_url": "https://api.github.com/users/Stannislav/received_events",
            "repos_url": "https://api.github.com/users/Stannislav/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Stannislav"
        }
    ],
    "author_association": "CONTRIBUTOR",
    "body": "## Description\r\n\r\nIn `bluesearch.minig.eval.ner_confusion_matrix` we use `sklearn.metrics.confusion_matrix`\r\nbut the corresponding import was missing.\r\n\r\n## Checklist\r\n\r\n- [ ] This PR refers to an issue from the [issue tracker](https://github.com/BlueBrain/Search/issues).\r\n  (if it is not the case, please create an issue first).\r\n- [ ] Unit tests added.\r\n  (if needed)\r\n- [ ] Documentation and `whatsnew.rst` updated.\r\n  (if needed)\r\n- [ ] `setup.py` and `requirements.txt` updated with new dependencies.\r\n  (if needed)\r\n- [ ] Type annotations added.\r\n  (if a function is added or modified)\r\n- [ ] All CI tests pass. \r\n",
    "closed_at": "2021-07-05T07:33:06Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
        "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
        "followers_url": "https://api.github.com/users/Stannislav/followers",
        "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
        "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Stannislav",
        "id": 8017698,
        "login": "Stannislav",
        "node_id": "MDQ6VXNlcjgwMTc2OTg=",
        "organizations_url": "https://api.github.com/users/Stannislav/orgs",
        "received_events_url": "https://api.github.com/users/Stannislav/received_events",
        "repos_url": "https://api.github.com/users/Stannislav/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Stannislav"
    },
    "comments": 5,
    "comments_content": [
        {
            "author_association": "COLLABORATOR",
            "body": "Our tests always passed, including this one\r\nhttps://github.com/BlueBrain/Search/blob/0bb500551b1b7c6f5bb9228335aa4df30a654e9c/tests/test_mining/test_eval.py#L497\r\nSo is this `import` necessary?\r\n\r\nNotice that the submodule `metrics` is part of the `__all__` defined in `sklearn`'s `__init__.py`:\r\nhttps://github.com/scikit-learn/scikit-learn/blob/8e8e6102b461ac91c7e8aa4ce55acfea512e8bbc/sklearn/__init__.py#L106",
            "created_at": "2021-06-29T11:46:54Z",
            "html_url": "https://github.com/BlueBrain/Search/pull/390#issuecomment-870524143",
            "id": 870524143,
            "issue_url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDUyNDE0Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/870524143/reactions"
            },
            "updated_at": "2021-06-29T11:46:54Z",
            "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/870524143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
                "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
                "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
                "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
                "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/FrancescoCasalegno",
                "id": 17013890,
                "login": "FrancescoCasalegno",
                "node_id": "MDQ6VXNlcjE3MDEzODkw",
                "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
                "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
                "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/FrancescoCasalegno"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@FrancescoCasalegno @pafonta \r\n\r\nI think we don't get an error because `sklearn.metrics` is probably imported by some other module that we import and that's how `sklearn.metrics` ends up in `sys.modules`. But I don't think relying on some module to import another module is a good idea.\r\n\r\nI honestly have no idea what's going on in `sklearn/__init__.py` - they list `\"metrics\"` in their `__all__` but I don't see it being imported anywhere. To my knowledge all that's listed in `__all__` has to be available in the current scope.\r\n\r\nHere's a small experiment I just ran to convince myself that importing `sklearn` does not make `sklearn.metrics` available out of the box:\r\n\r\n```python\r\n# main.py\r\nimport my_module\r\nimport sklearn\r\n\r\nprint(sklearn.metrics.confusion_matrix)\r\n```\r\n\r\n```python\r\n# my_module.py\r\n# empty for the moment\r\n```\r\n\r\n```bash\r\n$ python main.py\r\n main.py\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 5, in <module>\r\n    print(sklearn.metrics.confusion_matrix)\r\nAttributeError: module 'sklearn' has no attribute 'metrics'\r\n```\r\n\r\nNow change `my_module.py` to\r\n```python\r\n# my_module.py\r\nimport sklearn.metrics\r\n```\r\nand get\r\n```bash\r\n$ python main.py\r\n<function confusion_matrix at 0x11c969280>\r\n```\r\nwhich shows that importing `sklearn.metrics` in a module that you import also makes it available in the current module.\r\n\r\nBut like I said, I find relying on a module being imported somewhere by someone is not really safe and the most straightforward way is to just import all modules explicitly that are used in the code.",
            "created_at": "2021-06-29T15:32:23Z",
            "html_url": "https://github.com/BlueBrain/Search/pull/390#issuecomment-870702531",
            "id": 870702531,
            "issue_url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDcwMjUzMQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/870702531/reactions"
            },
            "updated_at": "2021-06-29T15:33:35Z",
            "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/870702531",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
                "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
                "followers_url": "https://api.github.com/users/Stannislav/followers",
                "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
                "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Stannislav",
                "id": 8017698,
                "login": "Stannislav",
                "node_id": "MDQ6VXNlcjgwMTc2OTg=",
                "organizations_url": "https://api.github.com/users/Stannislav/orgs",
                "received_events_url": "https://api.github.com/users/Stannislav/received_events",
                "repos_url": "https://api.github.com/users/Stannislav/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Stannislav"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@Stannislav\r\n\r\nNot being able to use `sklearn.metrics.confusion_matrix(...)` after `import sklearn` seems to be an error from `scikit-learn`.\r\n\r\nIndeed, many other libraries let do such thing (see below).\r\n\r\n> But I don't think relying on some module to import another module is a good idea.\r\n> ...\r\n> But like I said, I find relying on a module being imported somewhere by someone is not really safe and the most straightforward way is to just import all modules explicitly that are used in the code.\r\n\r\nWhy not. But then, we should be consistent and fix everywhere where we do this. For example:\r\nhere where `sqlalchemy.sql` is not imported:\r\nhttps://github.com/BlueBrain/Search/blob/12988ef564dd4e6373a7455f5ee30c0608e2e972/src/bluesearch/database/cord_19.py#L336\r\nand here where `np.random` is not imported:\r\nhttps://github.com/BlueBrain/Search/blob/12988ef564dd4e6373a7455f5ee30c0608e2e972/tests/test_embedding_models.py#L314\r\nand here where `pytest.mark` is not imported:\r\nhttps://github.com/BlueBrain/Search/blob/12988ef564dd4e6373a7455f5ee30c0608e2e972/tests/test_mining/test_eval.py#L43",
            "created_at": "2021-07-01T13:56:23Z",
            "html_url": "https://github.com/BlueBrain/Search/pull/390#issuecomment-872269135",
            "id": 872269135,
            "issue_url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjI2OTEzNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/872269135/reactions"
            },
            "updated_at": "2021-07-01T13:56:23Z",
            "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/872269135",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4543376?v=4",
                "events_url": "https://api.github.com/users/pafonta/events{/privacy}",
                "followers_url": "https://api.github.com/users/pafonta/followers",
                "following_url": "https://api.github.com/users/pafonta/following{/other_user}",
                "gists_url": "https://api.github.com/users/pafonta/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/pafonta",
                "id": 4543376,
                "login": "pafonta",
                "node_id": "MDQ6VXNlcjQ1NDMzNzY=",
                "organizations_url": "https://api.github.com/users/pafonta/orgs",
                "received_events_url": "https://api.github.com/users/pafonta/received_events",
                "repos_url": "https://api.github.com/users/pafonta/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/pafonta/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pafonta/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/pafonta"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@pafonta I don't know why you're trying to make this simple and clear issue unnecessarily complicated, the time wasted on this is incredible\r\n\r\n- `sklearn.metrics.confusion_matrix` doesn't work without importing\r\n- if a package pulls one of it's submodules up the hierarchy by importing it in its `__init__.py` that's fine (cf. `pytest.mark`, `np.random` etc.)\r\n- this is not happening with `sklearn.metrics`\r\n- conting on a different package to import `sklearn.metrics` is a bad idea\r\n\r\nwhat else is there to discuss? It's a one line change that fixes something that is broken.",
            "created_at": "2021-07-02T08:04:40Z",
            "html_url": "https://github.com/BlueBrain/Search/pull/390#issuecomment-872803649",
            "id": 872803649,
            "issue_url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjgwMzY0OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/872803649/reactions"
            },
            "updated_at": "2021-07-02T08:04:40Z",
            "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/872803649",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
                "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
                "followers_url": "https://api.github.com/users/Stannislav/followers",
                "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
                "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Stannislav",
                "id": 8017698,
                "login": "Stannislav",
                "node_id": "MDQ6VXNlcjgwMTc2OTg=",
                "organizations_url": "https://api.github.com/users/Stannislav/orgs",
                "received_events_url": "https://api.github.com/users/Stannislav/received_events",
                "repos_url": "https://api.github.com/users/Stannislav/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Stannislav"
            }
        },
        {
            "author_association": "COLLABORATOR",
            "body": "Hi @Stannislav and @pafonta,\r\n\r\nI think that the need for this 1-line change has been well clarified.\r\n\r\n1. For whatever reason `sklearn` doesn't `import` its sub-modules, unlike what done by `numpy` [here](https://github.com/numpy/numpy/blob/e69faef03428b82f5651a5fb521610ddea2bd22a/numpy/__init__.py#L158-L163), hence the need to `import sklearn.metrics`.\r\n2. Things were working in our code before even w/o this fix, but that was just by accident and we cannot rely on side-effects of other `import`s in general.\r\n\r\nLet's merge this PR and move on with other issues! \ud83d\ude42",
            "created_at": "2021-07-05T07:36:53Z",
            "html_url": "https://github.com/BlueBrain/Search/pull/390#issuecomment-873878935",
            "id": 873878935,
            "issue_url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3Mzg3ODkzNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/873878935/reactions"
            },
            "updated_at": "2021-07-05T07:36:53Z",
            "url": "https://api.github.com/repos/BlueBrain/Search/issues/comments/873878935",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
                "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
                "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
                "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
                "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/FrancescoCasalegno",
                "id": 17013890,
                "login": "FrancescoCasalegno",
                "node_id": "MDQ6VXNlcjE3MDEzODkw",
                "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
                "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
                "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/FrancescoCasalegno"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/BlueBrain/Search/issues/390/comments",
    "created_at": "2021-06-25T12:13:54Z",
    "draft": false,
    "events_url": "https://api.github.com/repos/BlueBrain/Search/issues/390/events",
    "html_url": "https://github.com/BlueBrain/Search/pull/390",
    "id": 930119875,
    "labels": [
        {
            "color": "d73a4a",
            "default": false,
            "description": "Something isn't working",
            "id": 1938483675,
            "name": "\ud83d\udc1b bug fix",
            "node_id": "MDU6TGFiZWwxOTM4NDgzNjc1",
            "url": "https://api.github.com/repos/BlueBrain/Search/labels/%F0%9F%90%9B%20bug%20fix"
        }
    ],
    "labels_url": "https://api.github.com/repos/BlueBrain/Search/issues/390/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njc3ODY3ODY5",
    "number": 390,
    "performed_via_github_app": null,
    "pull_request": {
        "diff_url": "https://github.com/BlueBrain/Search/pull/390.diff",
        "html_url": "https://github.com/BlueBrain/Search/pull/390",
        "merged_at": "2021-07-05T07:33:06Z",
        "patch_url": "https://github.com/BlueBrain/Search/pull/390.patch",
        "url": "https://api.github.com/repos/BlueBrain/Search/pulls/390"
    },
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/BlueBrain/Search/issues/390/reactions"
    },
    "repository_url": "https://api.github.com/repos/BlueBrain/Search",
    "state": "closed",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/BlueBrain/Search/issues/390/timeline",
    "title": "Add missing sklearn.metrics import in eval module",
    "updated_at": "2021-07-05T07:36:53Z",
    "url": "https://api.github.com/repos/BlueBrain/Search/issues/390",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8017698?v=4",
        "events_url": "https://api.github.com/users/Stannislav/events{/privacy}",
        "followers_url": "https://api.github.com/users/Stannislav/followers",
        "following_url": "https://api.github.com/users/Stannislav/following{/other_user}",
        "gists_url": "https://api.github.com/users/Stannislav/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Stannislav",
        "id": 8017698,
        "login": "Stannislav",
        "node_id": "MDQ6VXNlcjgwMTc2OTg=",
        "organizations_url": "https://api.github.com/users/Stannislav/orgs",
        "received_events_url": "https://api.github.com/users/Stannislav/received_events",
        "repos_url": "https://api.github.com/users/Stannislav/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Stannislav/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Stannislav/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Stannislav"
    }
}