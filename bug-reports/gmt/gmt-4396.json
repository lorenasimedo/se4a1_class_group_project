{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Originally posted in forum; https://forum.generic-mapping-tools.org/t/building-gmt-on-freebsd-12-1-release/967.\r\n\r\nSystem:\r\n```\r\n$ uname -a\r\nFreeBSD  12.1-RELEASE FreeBSD 12.1-RELEASE r354233 GENERIC  amd64\r\n```\r\nDuring ``cmake --build .``:\r\n```\r\n[... everything OK up until this point ...]\r\nScanning dependencies of target gmt\r\n[100%] Building C object src/CMakeFiles/gmt.dir/gmt.c.o\r\n[100%] Linking C executable gmt\r\nld: error: libgmt.so.6.2.0: undefined reference to backtrace\r\nld: error: libgmt.so.6.2.0: undefined reference to backtrace_symbols_fd\r\ncc: error: linker command failed with exit code 1 (use -v to see invocation)\r\n*** Error code 1\r\n\r\nStop.\r\nmake[2]: stopped in /usr/home/anbj/gmt/build\r\n*** Error code 1\r\n\r\nStop.\r\nmake[1]: stopped in /usr/home/anbj/gmt/build\r\n*** Error code 1\r\n\r\nStop.\r\nmake: stopped in /usr/home/anbj/gmt/build\r\n```\r\n\r\nAdding ``add_definitions(-DNO_SIGHANDLER)`` to *cmake/ConfigUser.cmake* makes it build successfully.\r\n\r\nThe error is likely caused by https://github.com/GenericMappingTools/gmt/blob/master/src/gmt_common_sighandler.c; the **#ifdefs** not being correct for FreeBSD.",
    "closed_at": "2020-11-01T22:19:08Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
        "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
        "followers_url": "https://api.github.com/users/PaulWessel/followers",
        "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
        "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/PaulWessel",
        "id": 26473567,
        "login": "PaulWessel",
        "node_id": "MDQ6VXNlcjI2NDczNTY3",
        "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
        "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
        "repos_url": "https://api.github.com/users/PaulWessel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/PaulWessel"
    },
    "comments": 5,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "These two functions are defined here:\r\nhttps://github.com/GenericMappingTools/gmt/blob/1c0595bd99312aa9c041fff492407045d11507ae/src/gmt_common_sighandler.c#L40-L53\r\n\r\nPerhaps in FreeBSD, the header file `execinfo.h` is found, but there are no definitions for these two functions?\r\n\r\nCould you please check if `execinfo.h` is found when running `cmake ..` (without adding `add_definitions(-DNO_SIGHANDLER)` to cmake/ConfigUser.cmake)? On macOS, I see these outputs:\r\n```\r\n-- Looking for errno.h\r\n-- Looking for errno.h - found\r\n-- Looking for execinfo.h\r\n-- Looking for execinfo.h - found\r\n-- Looking for fcntl.h\r\n-- Looking for fcntl.h - found\r\n-- Looking for signal.h\r\n-- Looking for signal.h - found\r\n```\r\n\r\nIf `execinfo.h` is found, you can try run `locate execinfo.h` to get the full directory to the file, and then check if these two functions are defined in that file.\r\n",
            "created_at": "2020-10-30T19:43:18Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396#issuecomment-719759533",
            "id": 719759533,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxOTc1OTUzMw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/719759533/reactions"
            },
            "updated_at": "2020-10-30T19:43:51Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/719759533",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@seisman ``cmake`` **does** find *execinfo.h* and both functions, *backtrace* and *backtrace_symbols_df*, are present in the file.\r\n\r\n*execinfo.h*:\r\n```\r\n$ cat /usr/include/execinfo.h\r\n/*      $NetBSD: execinfo.h,v 1.2 2012/06/09 21:22:17 christos Exp $    */\r\n/*      $FreeBSD: releng/12.1/contrib/libexecinfo/execinfo.h 255177 2013-09-03 13:38:41Z emaste $ */\r\n\r\n/*-\r\n * Copyright (c) 2012 The NetBSD Foundation, Inc.\r\n * All rights reserved.\r\n *\r\n * This code is derived from software contributed to The NetBSD Foundation\r\n * by Christos Zoulas.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions\r\n * are met:\r\n * 1. Redistributions of source code must retain the above copyright\r\n *    notice, this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS\r\n * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\r\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS\r\n * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n#ifndef _EXECINFO_H_\r\n#define _EXECINFO_H_\r\n\r\n#include <stddef.h>\r\n\r\n__BEGIN_DECLS\r\nsize_t backtrace(void **, size_t);\r\nchar **backtrace_symbols(void *const *, size_t);\r\nint backtrace_symbols_fd(void *const *, size_t, int);\r\nchar **backtrace_symbols_fmt(void *const *, size_t, const char *);\r\nint backtrace_symbols_fd_fmt(void *const *, size_t, int, const char *);\r\n__END_DECLS\r\n\r\n#endif /* _EXECINFO_H_ */\r\n```",
            "created_at": "2020-10-31T21:52:12Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396#issuecomment-719992947",
            "id": 719992947,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxOTk5Mjk0Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/719992947/reactions"
            },
            "updated_at": "2020-10-31T21:55:17Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/719992947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
                "events_url": "https://api.github.com/users/anbj/events{/privacy}",
                "followers_url": "https://api.github.com/users/anbj/followers",
                "following_url": "https://api.github.com/users/anbj/following{/other_user}",
                "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/anbj",
                "id": 29237824,
                "login": "anbj",
                "node_id": "MDQ6VXNlcjI5MjM3ODI0",
                "organizations_url": "https://api.github.com/users/anbj/orgs",
                "received_events_url": "https://api.github.com/users/anbj/received_events",
                "repos_url": "https://api.github.com/users/anbj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/anbj"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Here are the manpages of backtrace on Linux and FreeBSD:\r\n\r\n- GNU Linux: https://man7.org/linux/man-pages/man3/backtrace.3.html\r\n- FreeBSD: https://www.freebsd.org/cgi/man.cgi?query=backtrace&sektion=3&manpath=FreeBSD+11-current\r\n\r\nThe backtrack functions are included in the `glibc` library for GNU Linux, but for FreeBSD, it's in a separate library:\r\n```\r\nLIBRARY\r\n     Backtrace Access Library (libexecinfo, -lexecinfo)\r\n\r\nBecause these\tfunctions use elf(3) this is a separate\tlibrary\tin-\r\n\t  stead\tof being part of libc/libutil so that no library dependencies\r\n\t  are introduced.\r\n```\r\n\r\nIt seems on FreeBSD, GMT should link to the `libexecinfo` library if found.",
            "created_at": "2020-11-01T15:52:50Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396#issuecomment-720109593",
            "id": 720109593,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDEwOTU5Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720109593/reactions"
            },
            "updated_at": "2020-11-01T15:52:50Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720109593",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "From googling, looks like the cmake variable **CMAKE_SYSTEM_NAME** will be FreeBSD under FreeBSD, so maybe we need to add something like this around line 300 in src/CMakeLists.txt?\r\n\r\n```\r\nif (${CMAKE_SYSTEM_NAME} STREQUAL \"FreeBSD\")\r\n\tfind_library (EXECINFO_LIBRARY NAMES execinfo)\r\n\tlist (APPEND GMT_OPTIONAL_LIBRARIES ${EXECINFO_LIBRARY})\r\nendif (${CMAKE_SYSTEM_NAME} STREQUAL \"FreeBSD\")\r\n```",
            "created_at": "2020-11-01T18:36:13Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396#issuecomment-720132608",
            "id": 720132608,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDEzMjYwOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720132608/reactions"
            },
            "updated_at": "2020-11-01T18:36:13Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720132608",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think yes. Please open a PR to make it easier for @anbj to try.",
            "created_at": "2020-11-01T19:09:33Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396#issuecomment-720136699",
            "id": 720136699,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDEzNjY5OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720136699/reactions"
            },
            "updated_at": "2020-11-01T19:09:33Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/720136699",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396/comments",
    "created_at": "2020-10-30T08:22:14Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/4396",
    "id": 732976535,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3MzI5NzY1MzU=",
    "number": 4396,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396/timeline",
    "title": "Building on FreeBSD fails - gmt_common_sighandler.c",
    "updated_at": "2020-11-01T22:19:08Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4396",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
        "events_url": "https://api.github.com/users/anbj/events{/privacy}",
        "followers_url": "https://api.github.com/users/anbj/followers",
        "following_url": "https://api.github.com/users/anbj/following{/other_user}",
        "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/anbj",
        "id": 29237824,
        "login": "anbj",
        "node_id": "MDQ6VXNlcjI5MjM3ODI0",
        "organizations_url": "https://api.github.com/users/anbj/orgs",
        "received_events_url": "https://api.github.com/users/anbj/received_events",
        "repos_url": "https://api.github.com/users/anbj/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/anbj"
    }
}