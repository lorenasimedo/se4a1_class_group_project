{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Here is a bash script, which converts a sample XYZ data to gridline- and pixel-registered grids, and plots them, respectively.\r\n\r\n```bash\r\n# prepare sample data/matrix\r\ncat > input.dat << EOF\r\n0 0 0.1\r\n0 1 0.2\r\n0 2 0.3\r\n1 0 0.4\r\n1 1 0.5\r\n1 2 0.6\r\n2 0 0.7\r\n2 1 0.8\r\n2 2 0.9\r\nEOF\r\n\r\n# convert sample data to gridline- and pixel- grids.\r\ngmt xyz2grd input.dat -R0/2/0/2 -I1/1 -Ggridline.grd -rg -V\r\ngmt xyz2grd input.dat -R-0.5/2.5/-0.5/2.5 -I1/1 -Gpixel.grd -rp -V\r\n\r\n# check grid information\r\ngmt grdinfo gridline.grd\r\ngmt grdinfo pixel.grd\r\n\r\n# Plot gridline- and pixel- grids side by side\r\ngmt grdimage gridline.grd -JX6c -R-1/3/-1/3 -Baf -BWSen+t\"Gridline\" -K > gridline_pixel.ps\r\ngmt grdimage pixel.grd    -JX6c -R-1/3/-1/3 -Baf -BWSen+t\"Pixel\" -X8c -O >> gridline_pixel.ps\r\ngmt psconvert -A -P -Tg gridline_pixel.ps\r\n\r\nrm input.dat gridline.grd pixel.grd gmt.history gridline_pixel.ps\r\n```\r\n\r\nAlthough the two grids, `gridline.grd` and `pixel.grd`, have different grid registration, the plots are the same. See the output figure below:\r\n\r\n![image](https://user-images.githubusercontent.com/3974108/85186223-d7316100-b265-11ea-9d2b-b141ed02ec8f.png)\r\n\r\nI tried to plot the same figure using the GMT C API, by directly passing a matrix as gridline- or pixel grids. Here is the C code.\r\n```c\r\n#include \"gmt_dev.h\"\r\n\r\nint main () {\r\n\tunsigned int mode = GMT_SESSION_EXTERNAL;\r\n\tstruct GMT_MATRIX *M_p = NULL, *M_g = NULL;\r\n\tchar input_p[GMT_VF_LEN] = {\"\"}, input_g[GMT_VF_LEN] = {\"\"};\r\n\tchar args_p[128] = {\"\"}, args_g[128]= {\"\"};\r\n\tstruct GMTAPI_CTRL *API = NULL;\r\n\r\n\tdouble inc[2] = {1.0, 1.0};\r\n\tdouble coord[9] = {0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9};\r\n\r\n\tAPI = GMT_Create_Session (\"test\", 2U, mode, NULL);\r\n\r\n\t/* pass matrix as gridline-registered grid */\r\n\tdouble range_g[4] = {0.0, 2.0, 0.0, 2.0};\r\n\tif ((M_g = GMT_Create_Data (API, GMT_IS_GRID|GMT_VIA_MATRIX, GMT_IS_SURFACE, GMT_CONTAINER_ONLY, NULL, range_g, inc, GMT_GRID_NODE_REG, 0, NULL)) == NULL) return (EXIT_FAILURE);\r\n\tGMT_Put_Matrix (API, M_g, GMT_DOUBLE, 0, coord);\r\n\tGMT_Open_VirtualFile (API, GMT_IS_GRID|GMT_VIA_MATRIX, GMT_IS_SURFACE, GMT_IN|GMT_IS_REFERENCE, M_g, input_g);\r\n\tsprintf (args_g, \"%s -R-1/3/-1/3 -JX6c -Baf -BWSen+tGridline -K > test_matrix.ps\", input_g);\r\n\tGMT_Call_Module (API, \"grdimage\", GMT_MODULE_CMD, args_g);\r\n\tGMT_Close_VirtualFile (API, input_g);\r\n\r\n\t/* pass matrix as pixel-registered grid */\r\n\tdouble range_p[4] = {-0.5, 2.5, -0.5, 2.5};\r\n\tif ((M_p = GMT_Create_Data (API, GMT_IS_GRID|GMT_VIA_MATRIX, GMT_IS_SURFACE, GMT_CONTAINER_ONLY, NULL, range_p, inc, GMT_GRID_PIXEL_REG, 0, NULL)) == NULL) return (EXIT_FAILURE);\r\n\tGMT_Put_Matrix (API, M_p, GMT_DOUBLE, 0, coord);\r\n\tGMT_Open_VirtualFile (API, GMT_IS_GRID|GMT_VIA_MATRIX, GMT_IS_SURFACE, GMT_IN|GMT_IS_REFERENCE, M_p, input_p);\r\n\tsprintf (args_p, \"%s -R-1/3/-1/3 -JX6c -Baf -BWSen+tPixel -O -X8c >> test_matrix.ps\", input_p);\r\n\tGMT_Call_Module (API, \"grdimage\", GMT_MODULE_CMD, args_p);\r\n\tGMT_Close_VirtualFile (API, input_p);\r\n\r\n\tif (GMT_Destroy_Session (API)) return EXIT_FAILURE;\r\n\texit (0);\r\n}\r\n```\r\nThe C code is compiled using:\r\n```\r\ngcc test_matrix.c -o test_matrix `gmt-config --cflags` `gmt-config --libs`\r\n```\r\n\r\nRunning the executable `test_matrix` gives me the following result. The gridline image looks correct (although the order of the colored pixels is not the same as the bash version), but the pixel image is black.\r\n\r\n![image](https://user-images.githubusercontent.com/3974108/85186369-a00f7f80-b266-11ea-888c-2509d9c0bfbb.png)\r\n\r\nSomething wrong with my C code? Or a GMT API bug?",
    "closed_at": "2020-06-20T08:24:29Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
        "events_url": "https://api.github.com/users/seisman/events{/privacy}",
        "followers_url": "https://api.github.com/users/seisman/followers",
        "following_url": "https://api.github.com/users/seisman/following{/other_user}",
        "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/seisman",
        "id": 3974108,
        "login": "seisman",
        "node_id": "MDQ6VXNlcjM5NzQxMDg=",
        "organizations_url": "https://api.github.com/users/seisman/orgs",
        "received_events_url": "https://api.github.com/users/seisman/received_events",
        "repos_url": "https://api.github.com/users/seisman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/seisman"
    },
    "comments": 3,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "> Although the two grids, gridline.grd and pixel.grd, have different grid registration, the plots are the same. See the output figure below:\r\n\r\nYes, they are equal and that is correct. Both have 3x3 pixels and because the global limits are larger than the grid registered the border pixels are not trimmed.",
            "created_at": "2020-06-20T00:27:02Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/3502#issuecomment-646905932",
            "id": 646905932,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjkwNTkzMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646905932/reactions"
            },
            "updated_at": "2020-06-20T00:27:02Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646905932",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/537321?v=4",
                "events_url": "https://api.github.com/users/joa-quim/events{/privacy}",
                "followers_url": "https://api.github.com/users/joa-quim/followers",
                "following_url": "https://api.github.com/users/joa-quim/following{/other_user}",
                "gists_url": "https://api.github.com/users/joa-quim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/joa-quim",
                "id": 537321,
                "login": "joa-quim",
                "node_id": "MDQ6VXNlcjUzNzMyMQ==",
                "organizations_url": "https://api.github.com/users/joa-quim/orgs",
                "received_events_url": "https://api.github.com/users/joa-quim/received_events",
                "repos_url": "https://api.github.com/users/joa-quim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/joa-quim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/joa-quim/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/joa-quim"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Think you might as well commit this C code to the repo, no?  I can have a look.",
            "created_at": "2020-06-20T00:56:46Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/3502#issuecomment-646910563",
            "id": 646910563,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjkxMDU2Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646910563/reactions"
            },
            "updated_at": "2020-06-20T00:56:46Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646910563",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I just commited the C code to the branch `testapi-registration`. You can work on the PR https://github.com/GenericMappingTools/gmt/pull/3503 directly.",
            "created_at": "2020-06-20T01:03:24Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/3502#issuecomment-646911599",
            "id": 646911599,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjkxMTU5OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646911599/reactions"
            },
            "updated_at": "2020-06-20T01:03:24Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/646911599",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502/comments",
    "created_at": "2020-06-19T23:59:36Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/3502",
    "id": 642267710,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2020-07-16T17:47:20Z",
        "closed_issues": 69,
        "created_at": "2019-08-14T15:00:15Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
            "events_url": "https://api.github.com/users/seisman/events{/privacy}",
            "followers_url": "https://api.github.com/users/seisman/followers",
            "following_url": "https://api.github.com/users/seisman/following{/other_user}",
            "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/seisman",
            "id": 3974108,
            "login": "seisman",
            "node_id": "MDQ6VXNlcjM5NzQxMDg=",
            "organizations_url": "https://api.github.com/users/seisman/orgs",
            "received_events_url": "https://api.github.com/users/seisman/received_events",
            "repos_url": "https://api.github.com/users/seisman/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/seisman"
        },
        "description": "Official release of GMT 6.1.0.",
        "due_on": null,
        "html_url": "https://github.com/GenericMappingTools/gmt/milestone/5",
        "id": 4573010,
        "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/milestones/5/labels",
        "node_id": "MDk6TWlsZXN0b25lNDU3MzAxMA==",
        "number": 5,
        "open_issues": 0,
        "state": "closed",
        "title": "6.1.0",
        "updated_at": "2020-07-16T17:47:20Z",
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/milestones/5"
    },
    "node_id": "MDU6SXNzdWU2NDIyNjc3MTA=",
    "number": 3502,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502/timeline",
    "title": "Bug when passing matrix as a pixel-registered grid to GMT C API?",
    "updated_at": "2020-06-20T08:24:29Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/3502",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
        "events_url": "https://api.github.com/users/seisman/events{/privacy}",
        "followers_url": "https://api.github.com/users/seisman/followers",
        "following_url": "https://api.github.com/users/seisman/following{/other_user}",
        "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/seisman",
        "id": 3974108,
        "login": "seisman",
        "node_id": "MDQ6VXNlcjM5NzQxMDg=",
        "organizations_url": "https://api.github.com/users/seisman/orgs",
        "received_events_url": "https://api.github.com/users/seisman/received_events",
        "repos_url": "https://api.github.com/users/seisman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/seisman"
    }
}