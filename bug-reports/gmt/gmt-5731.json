{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Last year I posted a request for gmt to support making cpt's with process substition.\r\nSee:\r\n\r\n* https://github.com/GenericMappingTools/gmt/issues/4361 - request\r\n* https://github.com/GenericMappingTools/gmt/pull/4363 - implementation branch\r\n\r\nThis has now (well, June 11th probably) stopped working:\r\n\r\n```\r\n$ gmt grdimage @earth_relief_05m -C<(gmt makecpt -Cjet -T-1000/0/100) -JM15c -RNO -pdf map\r\ngrdimage [ERROR]: Color palette table /dev/fd/63 is empty\r\n[Session gmt (0)]: Error returned from GMT API: GMT_CPT_READ_ERROR (8)\r\n[Session gmt (0)]: Error returned from GMT API: GMT_CPT_READ_ERROR (8)\r\ngrdimage [ERROR]: Failed to read CPT /dev/fd/63.\r\n```\r\n\r\nTurns out it stopped working in aacc801d5bbc4844115f2bee64282ec6bf0e6252 after #5477 was merged.\r\n\r\nNot sure why this happens, but could it be that the input a process substitution creates (``/dev/fd/63``) confuses gmt when it checks if it's empty?",
    "closed_at": "2021-09-08T17:06:30Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
        "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
        "followers_url": "https://api.github.com/users/PaulWessel/followers",
        "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
        "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/PaulWessel",
        "id": 26473567,
        "login": "PaulWessel",
        "node_id": "MDQ6VXNlcjI2NDczNTY3",
        "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
        "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
        "repos_url": "https://api.github.com/users/PaulWessel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/PaulWessel"
    },
    "comments": 6,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "Possibly a permission issue.  Are you able to see what the file permissions and ownership on /dev/fd/63 is?",
            "created_at": "2021-09-06T19:41:51Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-913827119",
            "id": 913827119,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42d-Uv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/913827119/reactions"
            },
            "updated_at": "2021-09-06T19:41:51Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/913827119",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Does this help? Looks like ``/dev/fd/63`` is a link, so do not know if these permissions are real.\r\n\r\n```\r\n$ ls -l <(echo)\r\nlr-x------ 1 anbj anbj 64 Sep  6 19:52 /dev/fd/63 -> 'pipe:[1196496]'\r\n```",
            "created_at": "2021-09-06T19:52:58Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-913830084",
            "id": 913830084,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42d_DE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/913830084/reactions"
            },
            "updated_at": "2021-09-06T19:56:35Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/913830084",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
                "events_url": "https://api.github.com/users/anbj/events{/privacy}",
                "followers_url": "https://api.github.com/users/anbj/followers",
                "following_url": "https://api.github.com/users/anbj/following{/other_user}",
                "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/anbj",
                "id": 29237824,
                "login": "anbj",
                "node_id": "MDQ6VXNlcjI5MjM3ODI0",
                "organizations_url": "https://api.github.com/users/anbj/orgs",
                "received_events_url": "https://api.github.com/users/anbj/received_events",
                "repos_url": "https://api.github.com/users/anbj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/anbj"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "So I am unable to reproduce this on macOS of course. Just checking: If you run this again and again (copy paste run) it always fails, yes?  Can you reproduce the problem, @Esteban82 and @joa-quim?\r\n",
            "created_at": "2021-09-07T21:18:20Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-914636297",
            "id": 914636297,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42hD4J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914636297/reactions"
            },
            "updated_at": "2021-09-07T21:18:20Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914636297",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm fairly certain it always fail, yes.",
            "created_at": "2021-09-07T23:18:32Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-914687070",
            "id": 914687070,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42hQRe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914687070/reactions"
            },
            "updated_at": "2021-09-07T23:18:32Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914687070",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
                "events_url": "https://api.github.com/users/anbj/events{/privacy}",
                "followers_url": "https://api.github.com/users/anbj/followers",
                "following_url": "https://api.github.com/users/anbj/following{/other_user}",
                "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/anbj",
                "id": 29237824,
                "login": "anbj",
                "node_id": "MDQ6VXNlcjI5MjM3ODI0",
                "organizations_url": "https://api.github.com/users/anbj/orgs",
                "received_events_url": "https://api.github.com/users/anbj/received_events",
                "repos_url": "https://api.github.com/users/anbj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/anbj"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I suspect then the stat command fails to get the size.  I will see if I can add a check on that.",
            "created_at": "2021-09-08T00:48:50Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-914738780",
            "id": 914738780,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42hc5c",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914738780/reactions"
            },
            "updated_at": "2021-09-08T00:48:50Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914738780",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Well, I do check that stat is successful (returns 0) so it really returns a size of 0.  Yet reading more about process substitution (which I was not really aware of) it seems these special files are like pipes so random access is not allowed and I suspect stat may not be allowed or that the behavior is not guaranteed to work.  To wit, while it works for me on macOS, I am unable to ls -l /dev/fd/63 so something is not clear.  I will solve this by exempting files starting with /dev/fd from that particular check.",
            "created_at": "2021-09-08T00:55:41Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731#issuecomment-914743480",
            "id": 914743480,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
            "node_id": "IC_kwDOCJzWHc42heC4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914743480/reactions"
            },
            "updated_at": "2021-09-08T00:55:41Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/914743480",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731/comments",
    "created_at": "2021-09-06T18:31:43Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/5731",
    "id": 989375416,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU5ODkzNzU0MTY=",
    "number": 5731,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731/timeline",
    "title": "cpt made from process substitution fails",
    "updated_at": "2021-09-08T17:06:30Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5731",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
        "events_url": "https://api.github.com/users/anbj/events{/privacy}",
        "followers_url": "https://api.github.com/users/anbj/followers",
        "following_url": "https://api.github.com/users/anbj/following{/other_user}",
        "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/anbj",
        "id": 29237824,
        "login": "anbj",
        "node_id": "MDQ6VXNlcjI5MjM3ODI0",
        "organizations_url": "https://api.github.com/users/anbj/orgs",
        "received_events_url": "https://api.github.com/users/anbj/received_events",
        "repos_url": "https://api.github.com/users/anbj/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/anbj"
    }
}