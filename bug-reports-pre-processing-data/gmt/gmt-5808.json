{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "NB! This might a `gdal`-issue. In that case I apologize.\r\n\r\nRelated post in the forum: https://forum.generic-mapping-tools.org/t/exporting-embellished-rasters-with-proper-coordinates/1513/3\r\n\r\nIf the ``PS_MEDIA`` is too small and figure 'floats outside the edge' the coordinates blows up. The following script creates three tiff's (yes, double *f*) (and tif's [yes, single *f*) with no *proj*-info which I do not need, see #5807).\r\n\r\n```\r\n#figure is contained within PS_MEDIA - works\r\nps=works.ps\r\ngmt grdimage -JM5c -RNO @earth_relief_10m -P -Bxafg -Byafg > $ps\r\ngmt psconvert -Tt -W+g -Z $ps\r\n\r\n#figure is too big for chosen PS_MEDIA - bad coordinates (see below)\r\nps=does-not-work-A4.ps\r\ngmt grdimage -JM25c -RNO @earth_relief_10m -P -Bxafg -Byafg > $ps\r\ngmt psconvert -Tt -W+g -Z $ps\r\n\r\n#PS_MEDIA set to A0 is now big enough to contain the figure - works\r\nps=now-works-A0.ps\r\ngmt grdimage -JM25c -RNO @earth_relief_10m -P -Bxafg -Byafg --PS_MEDIA=A0 > $ps\r\ngmt psconvert -Tt -W+g -Z $ps\r\n```\r\n\r\nRemove ``-P`` and the problem affect the x-coordinates, instead of the y-coordinate due to the orientation (see below).\r\n\r\nAnd here is ``grdinfo`` output of the three different tiff's:\r\n\r\n```\r\n$ gmt grdinfo works.tiff\r\nworks.tiff: Title: Grid imported via GDAL\r\nworks.tiff: Command: \r\nworks.tiff: Remark: \r\nworks.tiff: Pixel node registration used [Cartesian grid]\r\nworks.tiff: Grid file format: gd = Import/export through GDAL\r\nworks.tiff: x_min: -3300110.20963 x_max: 3292090.50074 x_inc: 8019.7088934 name: x n_columns: 822\r\nworks.tiff: y_min: 7298623.17362 y_max: 16679956.7194 y_inc: 8018.2337998 name: y n_rows: 1170\r\nworks.tiff: v_min: 1.79769313486e+308 v_max: -1.79769313486e+308 name: z\r\nworks.tiff: scale_factor: 1 add_offset: 0\r\n+proj=merc +lon_0=12.208602 +k=1 +x_0=0 +y_0=0 +a=6378137 +rf=298.257220143428 +units=m +no_defs\r\n\r\n$ gmt grdinfo does-not-work-A4.tiff\r\ndoes-not-work-A4.tiff: Title: Grid imported via GDAL\r\ndoes-not-work-A4.tiff: Command: \r\ndoes-not-work-A4.tiff: Remark: \r\ndoes-not-work-A4.tiff: Pixel node registration used [Cartesian grid]\r\ndoes-not-work-A4.tiff: Grid file format: gd = Import/export through GDAL\r\ndoes-not-work-A4.tiff: x_min: -2556007.23668 x_max: 1129137.2628 x_inc: 1605.02809211 name: x n_columns: 2296\r\ndoes-not-work-A4.tiff: y_min: 6.89305648994e+12 y_max: 6.8930617669e+12 y_inc: 1604.91296357 name: y n_rows: 3288\r\ndoes-not-work-A4.tiff: v_min: 1.79769313486e+308 v_max: -1.79769313486e+308 name: z\r\ndoes-not-work-A4.tiff: scale_factor: 1 add_offset: 0\r\n+proj=merc +lon_0=12.208602 +k=1 +x_0=0 +y_0=0 +a=6378137 +rf=298.257220143428 +units=m +no_defs\r\n\r\n$ gmt grdinfo now-works-A0.tiff\r\nnow-works-A0.tiff: Title: Grid imported via GDAL\r\nnow-works-A0.tiff: Command: \r\nnow-works-A0.tiff: Remark: \r\nnow-works-A0.tiff: Pixel node registration used [Cartesian grid]\r\nnow-works-A0.tiff: Grid file format: gd = Import/export through GDAL\r\nnow-works-A0.tiff: x_min: -2556007.23668 x_max: 2554402.20859 x_inc: 1605.02809211 name: x n_columns: 3184\r\nnow-works-A0.tiff: y_min: 7797257.28588 y_max: 16179717.6942 y_inc: 1604.91296348 name: y n_rows: 5223\r\nnow-works-A0.tiff: v_min: 1.79769313486e+308 v_max: -1.79769313486e+308 name: z\r\nnow-works-A0.tiff: scale_factor: 1 add_offset: 0\r\n+proj=merc +lon_0=12.208602 +k=1 +x_0=0 +y_0=0 +a=6378137 +rf=298.257220143428 +units=m +no_defs\r\n```\r\n\r\nThe notion of having a *PS_MEDIA* (or *PAPER_MEDIA* as it used to be called?) seems a bit analog.",
    "closed_at": "2021-09-28T18:00:15Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
        "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
        "followers_url": "https://api.github.com/users/PaulWessel/followers",
        "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
        "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/PaulWessel",
        "id": 26473567,
        "login": "PaulWessel",
        "node_id": "MDQ6VXNlcjI2NDczNTY3",
        "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
        "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
        "repos_url": "https://api.github.com/users/PaulWessel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/PaulWessel"
    },
    "comments": 4,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "In classic mode the PS_MEDIA setting determines what the paper size is and Ghostscript then uses that to determine where anything is written.  If you plot outside the paper then gs does not find it.  So it is on the user to ensure the paper size is selected correctly.  While we have never done so, we could consider adding a warning if a classic mode user supplies a -R -J that computes to dimensions that exceed the selected paper size.\r\n\r\nIn contrast, in modern mode we select the largest paper size possible (10x10 meter roughly) and then crop inwards.",
            "created_at": "2021-09-27T21:12:48Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5808#issuecomment-928285475",
            "id": 928285475,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808",
            "node_id": "IC_kwDOCJzWHc43VIMj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928285475/reactions"
            },
            "updated_at": "2021-09-27T21:12:48Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928285475",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "A warning would probably be nice.\r\n\r\nWould changing the default size be an alternative?\r\n\r\nWhy can't paper size be 10x10 meter in classic mode also?\r\n\r\n```\r\n$ gmt defaults | grep PS_MEDIA\r\nPS_MEDIA                       = a4\r\n```",
            "created_at": "2021-09-27T21:34:54Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5808#issuecomment-928305945",
            "id": 928305945,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808",
            "node_id": "IC_kwDOCJzWHc43VNMZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928305945/reactions"
            },
            "updated_at": "2021-09-27T21:34:54Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928305945",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
                "events_url": "https://api.github.com/users/anbj/events{/privacy}",
                "followers_url": "https://api.github.com/users/anbj/followers",
                "following_url": "https://api.github.com/users/anbj/following{/other_user}",
                "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/anbj",
                "id": 29237824,
                "login": "anbj",
                "node_id": "MDQ6VXNlcjI5MjM3ODI0",
                "organizations_url": "https://api.github.com/users/anbj/orgs",
                "received_events_url": "https://api.github.com/users/anbj/received_events",
                "repos_url": "https://api.github.com/users/anbj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/anbj"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Classic uses expect a papersize that is either A4 or US letter by default.  It has been that way since the early 1990s and we cannot change that.  We can add a warning of course.\r\nSpooling a 10x10m PS to a printer might make it print out 100s of pages, depending on driver.",
            "created_at": "2021-09-27T21:39:57Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5808#issuecomment-928310644",
            "id": 928310644,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808",
            "node_id": "IC_kwDOCJzWHc43VOV0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928310644/reactions"
            },
            "updated_at": "2021-09-27T21:39:57Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928310644",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I see.\r\n\r\nIf it is easy to do, a warning might be nice.",
            "created_at": "2021-09-27T21:47:38Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5808#issuecomment-928319254",
            "id": 928319254,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808",
            "node_id": "IC_kwDOCJzWHc43VQcW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928319254/reactions"
            },
            "updated_at": "2021-09-27T21:47:38Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/928319254",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
                "events_url": "https://api.github.com/users/anbj/events{/privacy}",
                "followers_url": "https://api.github.com/users/anbj/followers",
                "following_url": "https://api.github.com/users/anbj/following{/other_user}",
                "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/anbj",
                "id": 29237824,
                "login": "anbj",
                "node_id": "MDQ6VXNlcjI5MjM3ODI0",
                "organizations_url": "https://api.github.com/users/anbj/orgs",
                "received_events_url": "https://api.github.com/users/anbj/received_events",
                "repos_url": "https://api.github.com/users/anbj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/anbj"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808/comments",
    "created_at": "2021-09-27T20:10:22Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/5808",
    "id": 1008550280,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOCJzWHc48HUGI",
    "number": 5808,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808/timeline",
    "title": "Coordinates blows up if PS_MEDIA is too small to contain figure",
    "updated_at": "2021-09-30T07:24:20Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5808",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29237824?v=4",
        "events_url": "https://api.github.com/users/anbj/events{/privacy}",
        "followers_url": "https://api.github.com/users/anbj/followers",
        "following_url": "https://api.github.com/users/anbj/following{/other_user}",
        "gists_url": "https://api.github.com/users/anbj/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/anbj",
        "id": 29237824,
        "login": "anbj",
        "node_id": "MDQ6VXNlcjI5MjM3ODI0",
        "organizations_url": "https://api.github.com/users/anbj/orgs",
        "received_events_url": "https://api.github.com/users/anbj/received_events",
        "repos_url": "https://api.github.com/users/anbj/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/anbj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/anbj/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/anbj"
    }
}