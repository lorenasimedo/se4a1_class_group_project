{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": ">  using `gmt 6.2dev8` on linux, the most up-to-date version currently available from `conda-forge`.\r\n\r\nHi,\r\n\r\nThis post is more of a comment than a software issue per se. I don't know if it really has its place here or on the forum. At any rate...\r\n\r\nI spent quite some time yesterday trying to \"properly\" scale arrows for wind maps using `grdvector`.\r\nThe conclusion from the screed to come is : \r\nA. The back and forth between units is too tedious (cm on paper, km as well as degrees on map, data units, ...)\r\nB. There should be an option to scale `-Q+n` in data units\r\nC. The legend for arrows is too tedious (maybe an automatic something with +n too?)\r\nD. Need of a more concrete gallery example using grdvector (glacier flow in greenland?).\r\n\r\n## My goals were : \r\n1. plot two distincts regions on two different plots but where 1cm on paper equals the same distance on both maps\r\n    * map 1 : +/- 30N over 80 degrees longitude\r\n    * map 2 : +/- 30N over 170 degrees longitude\r\n2. scale the arrows so 1 data unit corresponds roughly to the data resolution (ie wind of 1 m/s ~= 0.25 degrees)\r\n3. further scale the arrows so values smaller than 10 m/s are scaled down (for aesthetic)\r\n4. plot a legend with a 10m/s reference\r\n\r\n## First difficulty : pen sizes\r\nThe arrow's pen and head (`-W and -Q`) are scales with the map.\r\nIn my case as one map is wider than the other (see point **(1)**),`-W0.1c and -Q0.01c` have two different aspect on each map.\r\n\r\n> resolution : calculate the aspect ratio between the two maps and apply the resulting values.\r\n```\r\n# basin_rat = 170/80\r\n# map_cm = paper height in cm\r\n# 2, 0.25 and 18 result from tuning for aesthetic.\r\nv_pen=$(echo \"scale=3;$basin_rat * 2/(($lonE-$lonW)/$map_cm/0.25) ;\"|bc)\t# Arrow pen thickness (in cm)\r\nv_head=$(echo \"scale=3;$basin_rat * 360/($lonE-$lonW)/18;\"|bc)\t\t\t# Arrow head size (in cm)\r\n```\r\n\r\n## Second difficulty : scaling\r\nAfter working around the `-S` option for a while (see point **(2)**), I finally scaled correctly my arrow with:\r\n```\r\nv_scale=$(echo \"scale=3; 0.25 * 111.132954 ;\"|bc)  # Wind vector scaling (1m/s = 0.25deg = 27.783km)\r\n-Si${v_scale}k\r\n```\r\nMy real problem resides in point **(3)**, when I wanted to scale down the arrows smaller than 10m/s using the `-Q+n` option. At first I had scaled my arrow with `-S` instead of `-Si`, so it was not obvious to me that I needed to give `-Q+n` in the same unit as the latter (km).\r\n~~In my opinion~~, even if explicitly mentioned by the documentation, more examples should be provided (in the gallery maybe?).\r\n```\r\n# here I want a scaling under 10 m/s\r\ngmt grdvector tmp_u.nc tmp_v.nc -Gblack -W${v_pen}c,black -Si${v_scale}k -Q${v_head}c+e+a45+jc+n$(echo \"scale=3; $v_scale * 10;\"|bc)k\r\n```\r\n\r\n* Subsequent question 1 : If I understand the documentation correctly, using -Q+n1 has no effect ? What happens when dealing with small regions ?\r\n* Subsequent question 2 : the `-Q+n<value in km>` option scales down arrows smaller than <value>. Shouldn't it scales up arrows greater ?\r\n\r\n## Last difficulty (bug?) : legend\r\nDealing with legends and scaled arrow is a headache. There must be a simpler way.\r\n\r\n**Potential bug?** : If I plot the head of the arrow, the tail partially disappears (there seems to be an overlap). The resulting aspect thus differs greatly from the arrows plotted on the map.\r\n\r\n~~~\r\ngmt legend -DjTR+w2c+o-5p/2p -F+r4p+pthinnest,gray+gwhite --FONT_ANNOT_PRIMARY=8p <<- END\r\nS - - $(echo \"scale=3; $basin_rat * 10 * ${v_scale}/111.132954 * ${map_cm}/(${lonE}-${lonW});\"|bc)c black ${v_pen}c - 10m.s@+-1@+\r\nEND\r\n~~~\r\n* ~~Note on block width~~: I don't really remember why I resorted to give a manual value. I guess I was just tired at some point... but automatic width exists right?*\r\n\r\n\r\nThe result : \r\n\r\n<img width=\"1307\" alt=\"Screenshot 2021-02-19 at 15 38 44\" src=\"https://user-images.githubusercontent.com/74073266/108558909-9a23df80-72c8-11eb-8f9b-631b93a34d2a.png\">\r\n",
    "closed_at": "2021-02-19T21:54:23Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
        "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
        "followers_url": "https://api.github.com/users/maxrjones/followers",
        "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
        "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/maxrjones",
        "id": 14077947,
        "login": "maxrjones",
        "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
        "organizations_url": "https://api.github.com/users/maxrjones/orgs",
        "received_events_url": "https://api.github.com/users/maxrjones/received_events",
        "repos_url": "https://api.github.com/users/maxrjones/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/maxrjones"
    },
    "comments": 1,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "Can you please post this in the Q&A on the forum? It is possible that other users know the answer to your questions and is best to determine that it is definitely a bug before opening an issue. I will close this after it gets moved to the forum.",
            "created_at": "2021-02-19T21:07:49Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4832#issuecomment-782352678",
            "id": 782352678,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjM1MjY3OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/782352678/reactions"
            },
            "updated_at": "2021-02-19T21:07:49Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/782352678",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
                "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
                "followers_url": "https://api.github.com/users/maxrjones/followers",
                "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
                "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/maxrjones",
                "id": 14077947,
                "login": "maxrjones",
                "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
                "organizations_url": "https://api.github.com/users/maxrjones/orgs",
                "received_events_url": "https://api.github.com/users/maxrjones/received_events",
                "repos_url": "https://api.github.com/users/maxrjones/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/maxrjones"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832/comments",
    "created_at": "2021-02-19T20:51:25Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/4832",
    "id": 812338156,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4MTIzMzgxNTY=",
    "number": 4832,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832/timeline",
    "title": "Comment on grdvector and bug(?) on legend v",
    "updated_at": "2021-02-19T21:54:23Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4832",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/74073266?v=4",
        "events_url": "https://api.github.com/users/gd-a/events{/privacy}",
        "followers_url": "https://api.github.com/users/gd-a/followers",
        "following_url": "https://api.github.com/users/gd-a/following{/other_user}",
        "gists_url": "https://api.github.com/users/gd-a/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gd-a",
        "id": 74073266,
        "login": "gd-a",
        "node_id": "MDQ6VXNlcjc0MDczMjY2",
        "organizations_url": "https://api.github.com/users/gd-a/orgs",
        "received_events_url": "https://api.github.com/users/gd-a/received_events",
        "repos_url": "https://api.github.com/users/gd-a/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gd-a/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gd-a/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gd-a"
    }
}