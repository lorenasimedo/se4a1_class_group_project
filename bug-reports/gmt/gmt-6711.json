{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "**Description of the problem**\r\nWhen running two gmt (new style) scripts in parallel in the same directory, I errors that look like ghostscript errors that indicate conflicts between the two jobs writing in the same temporary PS files. I suspect that some intermediate file has a fixed name, so that the two jobs clash.\r\n\r\nE.g.:\r\n **** Error: Unknown operator: '168.676114.918191269982' looks like a malformed number, replacing with 0.\r\n                Output may be incorrect.\r\n   **** Error: Unknown operator: '.673.48874.1953.3' looks like a malformed number, replacing with 0.\r\n                Output may be incorrect.\r\n\r\nI do not think that used to be the case before.\r\n\r\n**System information**\r\n\r\n* Operating system: macOS 12.3.1 21E258 x86_64\r\n* GMT version (`gmt --version`): 6.4.0_620a645_2022.03.14\r\n",
    "closed_at": "2022-05-14T19:12:44Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
        "events_url": "https://api.github.com/users/remkos/events{/privacy}",
        "followers_url": "https://api.github.com/users/remkos/followers",
        "following_url": "https://api.github.com/users/remkos/following{/other_user}",
        "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/remkos",
        "id": 11457381,
        "login": "remkos",
        "node_id": "MDQ6VXNlcjExNDU3Mzgx",
        "organizations_url": "https://api.github.com/users/remkos/orgs",
        "received_events_url": "https://api.github.com/users/remkos/received_events",
        "repos_url": "https://api.github.com/users/remkos/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/remkos"
    },
    "comments": 6,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "Cannot be done, the [begin](https://docs.generic-mapping-tools.org/dev/begin.html#note-on-unix-shells) docs.",
            "created_at": "2022-05-11T15:19:29Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1123919998",
            "id": 1123919998,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5C_ah-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1123919998/reactions"
            },
            "updated_at": "2022-05-11T15:19:29Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1123919998",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Cannot be done, the [begin](https://docs.generic-mapping-tools.org/dev/begin.html#note-on-unix-shells) docs.\r\n\r\nI'm not running jobs in parallel directly from the command line, but through shell scripts. E.g.:\r\n`my_gmt_script.sh blabla.pdf`\r\nCalling this script from make, to create multiple pngs (e.g.  `make -j6 *.pdf`), I can indeed see six individual sessions being created in `~/.gmt/sessions`, each with their own jobid. So it is not the type of clash that is mentioned in the docs.\r\nThere must be some other clash, because when I run the same with `make -j1 *.pdf`, I do not get the errors.\r\n\r\nAh ... I do see a file `gmt_0_intermediate.pdf` being created in the directory the directory from which the shell scripts are called. That should not happen. They should only appear in `~/.gmt/sessions/gmt_session.*`\r\n\r\nSo clearly a bug! The jobs are writing in the same *PDF* file (I suspected PS before).",
            "created_at": "2022-05-13T08:31:03Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1125792514",
            "id": 1125792514,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5DGjsC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125792514/reactions"
            },
            "updated_at": "2022-05-13T08:40:42Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125792514",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
                "events_url": "https://api.github.com/users/remkos/events{/privacy}",
                "followers_url": "https://api.github.com/users/remkos/followers",
                "following_url": "https://api.github.com/users/remkos/following{/other_user}",
                "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/remkos",
                "id": 11457381,
                "login": "remkos",
                "node_id": "MDQ6VXNlcjExNDU3Mzgx",
                "organizations_url": "https://api.github.com/users/remkos/orgs",
                "received_events_url": "https://api.github.com/users/remkos/received_events",
                "repos_url": "https://api.github.com/users/remkos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/remkos"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Interesting.  See if you can recreate this problem with a simple basemap or coast script called from a makefile and if so post it here so I can have a look.  I often have some of the GMT tests fail in mysterious ways when I run the tests since I think I have -j10 and sometimes -j20 and there is clearly some confusion at times.  Rerunning the scripts manually passes, and there is not real pattern to which scripts might fail.",
            "created_at": "2022-05-13T08:44:13Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1125803960",
            "id": 1125803960,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5DGme4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125803960/reactions"
            },
            "updated_at": "2022-05-13T08:44:13Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125803960",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Will do.",
            "created_at": "2022-05-13T08:45:06Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1125804714",
            "id": 1125804714,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5DGmqq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125804714/reactions"
            },
            "updated_at": "2022-05-13T08:45:06Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125804714",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
                "events_url": "https://api.github.com/users/remkos/events{/privacy}",
                "followers_url": "https://api.github.com/users/remkos/followers",
                "following_url": "https://api.github.com/users/remkos/following{/other_user}",
                "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/remkos",
                "id": 11457381,
                "login": "remkos",
                "node_id": "MDQ6VXNlcjExNDU3Mzgx",
                "organizations_url": "https://api.github.com/users/remkos/orgs",
                "received_events_url": "https://api.github.com/users/remkos/received_events",
                "repos_url": "https://api.github.com/users/remkos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/remkos"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Here is some evidence from `gmt end -Vd` that an intermediate file `gmt_0_intermediate.pdf` (without any preceeding path, so within the current working directory) is created.\r\nUnfortunately not yet duplicated in a test.\r\n```\r\npsconvert [INFORMATION]: Processing /Users/remko/.gmt/sessions/gmt_session.83556/gmt_0.ps-...\r\npsconvert [INFORMATION]: An unknown psconvert setting was found but since image coordinates seem to be geographical, a linear transformation will be used.\r\npsconvert [INFORMATION]: PS file with transparency must be converted to PDF before creating PNG\r\npsconvert [INFORMATION]: Convert to intermediate PDF...\r\npsconvert [DEBUG]: Running: gs -q -dNOPAUSE -dBATCH -dNOSAFER -dPDFSETTINGS=/prepress -dDownsampleColorImages=false -dDownsampleGrayImages=false -dDownsampleMonoImages=false -dUseFlateCompression=true -dEmbedAllFonts=true -dSubsetFonts=true -dMonoImageFilter=/FlateEncode -dAutoFilterGrayImages=false -dGrayImageFilter=/FlateEncode -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dSCANCONVERTERTYPE=2 -dALLOWPSTRANSPARENCY -dMaxBitmap=2147483647 -dUseFastColor=true -dGraphicsAlphaBits=1 -dTextAlphaBits=1 -sDEVICE=pdfwrite  -g2480x3509 -r300 -sOutputFile='gmt_0_intermediate.pdf' '/Users/remko/.gmt/sessions/gmt_session.83556/psconvert_83638d.eps'\r\npsconvert [INFORMATION]: Convert PDF with transparency to PNG...\r\npsconvert [DEBUG]: Running: gs -q -dNOPAUSE -dBATCH -dNOSAFER -dPDFSETTINGS=/prepress -dDownsampleColorImages=false -dDownsampleGrayImages=false -dDownsampleMonoImages=false -dUseFlateCompression=true -dEmbedAllFonts=true -dSubsetFonts=true -dMonoImageFilter=/FlateEncode -dAutoFilterGrayImages=false -dGrayImageFilter=/FlateEncode -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dSCANCONVERTERTYPE=2 -dALLOWPSTRANSPARENCY -dMaxBitmap=2147483647 -dUseFastColor=true -dGraphicsAlphaBits=2 -dTextAlphaBits=4 -sDEVICE=png16m  -g2480x3509 -r300 -sOutputFile='d/6a_hrnto1-6a_hrrep1.png' 'gmt_0_intermediate.pdf'\r\npsconvert [DEBUG]: Delete gmt_0_intermediate.pdf\r\npsconvert [DEBUG]: Delete /Users/remko/.gmt/sessions/gmt_session.83556/psconvert_83638d.eps\r\n```",
            "created_at": "2022-05-13T11:17:26Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1125946394",
            "id": 1125946394,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5DHJQa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125946394/reactions"
            },
            "updated_at": "2022-05-13T11:17:26Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125946394",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
                "events_url": "https://api.github.com/users/remkos/events{/privacy}",
                "followers_url": "https://api.github.com/users/remkos/followers",
                "following_url": "https://api.github.com/users/remkos/following{/other_user}",
                "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/remkos",
                "id": 11457381,
                "login": "remkos",
                "node_id": "MDQ6VXNlcjExNDU3Mzgx",
                "organizations_url": "https://api.github.com/users/remkos/orgs",
                "received_events_url": "https://api.github.com/users/remkos/received_events",
                "repos_url": "https://api.github.com/users/remkos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/remkos"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I found that a local `gmt_0_intermediate.pdf` (i.e. in the current working directory) is always created when all the below conditions are satisfied:\r\n- The output format is PNG\r\n- The output file is in a subdirectory, so output name is, e.g., img/plot.png\r\n- There is transparency in the plot, but this can be as obscure as using `gmt plot -Sq` even without explicit transparency.\r\n",
            "created_at": "2022-05-13T11:23:11Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711#issuecomment-1125950671",
            "id": 1125950671,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
            "node_id": "IC_kwDOCJzWHc5DHKTP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125950671/reactions"
            },
            "updated_at": "2022-05-13T11:23:11Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/1125950671",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
                "events_url": "https://api.github.com/users/remkos/events{/privacy}",
                "followers_url": "https://api.github.com/users/remkos/followers",
                "following_url": "https://api.github.com/users/remkos/following{/other_user}",
                "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/remkos",
                "id": 11457381,
                "login": "remkos",
                "node_id": "MDQ6VXNlcjExNDU3Mzgx",
                "organizations_url": "https://api.github.com/users/remkos/orgs",
                "received_events_url": "https://api.github.com/users/remkos/received_events",
                "repos_url": "https://api.github.com/users/remkos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/remkos"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711/comments",
    "created_at": "2022-05-11T14:56:55Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/6711",
    "id": 1232789885,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOCJzWHc5JeuF9",
    "number": 6711,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711/timeline",
    "title": "GMT cannot do parallel jobs in same directory",
    "updated_at": "2022-05-14T19:12:44Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/6711",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11457381?v=4",
        "events_url": "https://api.github.com/users/remkos/events{/privacy}",
        "followers_url": "https://api.github.com/users/remkos/followers",
        "following_url": "https://api.github.com/users/remkos/following{/other_user}",
        "gists_url": "https://api.github.com/users/remkos/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/remkos",
        "id": 11457381,
        "login": "remkos",
        "node_id": "MDQ6VXNlcjExNDU3Mzgx",
        "organizations_url": "https://api.github.com/users/remkos/orgs",
        "received_events_url": "https://api.github.com/users/remkos/received_events",
        "repos_url": "https://api.github.com/users/remkos/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/remkos/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/remkos/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/remkos"
    }
}