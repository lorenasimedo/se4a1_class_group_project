{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "<!--To help us understand and resolve your issue, please fill out the form to the best of your ability. Feel free to delete the sections that do not apply.-->\r\n\r\n**Description of the problem**\r\n\r\n*Originally posted in [this comment](https://github.com/GenericMappingTools/gmt/pull/3344#issuecomment-786304660) by @PaulWessel*\r\n\r\nThe settings for MAP_ANNOT_OBLIQUE should only be considered for rectangular, oblique maps.\r\n\r\n",
    "closed_at": "2021-03-17T13:59:54Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
        "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
        "followers_url": "https://api.github.com/users/maxrjones/followers",
        "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
        "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/maxrjones",
        "id": 14077947,
        "login": "maxrjones",
        "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
        "organizations_url": "https://api.github.com/users/maxrjones/orgs",
        "received_events_url": "https://api.github.com/users/maxrjones/received_events",
        "repos_url": "https://api.github.com/users/maxrjones/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/maxrjones"
    },
    "comments": 7,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "@PaulWessel, there's a notification above about a commit that closes this issue but it isn't associated with a PR. Is it ready to try out?",
            "created_at": "2021-03-01T16:00:02Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-788062762",
            "id": 788062762,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODA2Mjc2Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788062762/reactions"
            },
            "updated_at": "2021-03-01T16:00:02Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788062762",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
                "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
                "followers_url": "https://api.github.com/users/maxrjones/followers",
                "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
                "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/maxrjones",
                "id": 14077947,
                "login": "maxrjones",
                "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
                "organizations_url": "https://api.github.com/users/maxrjones/orgs",
                "received_events_url": "https://api.github.com/users/maxrjones/received_events",
                "repos_url": "https://api.github.com/users/maxrjones/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/maxrjones"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I started a branch but got stuck in the mud and realized best to just delete it.  So back to square one I am afraid.  It is messy because non-oblique projections are also at times relying on the annon_oblique settings.  Still working on a better approach.",
            "created_at": "2021-03-01T17:11:18Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-788116356",
            "id": 788116356,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODExNjM1Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788116356/reactions"
            },
            "updated_at": "2021-03-01T17:11:18Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788116356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Some comments to myself as I consider a working system for a new branch to address this issue.\r\n\r\n- Given its name and description, **MAP_ANNOT_OBLIQUE** should really only apply to projections that (a) have an oblique aspect and (b) have straight boundaries.  This is usually mean a combination of **-R -J** that involves **-R..+r**.\r\n- **MAP_ANNOT_OBLIQUE** is internally reduced to a bitflag called `GMT->current.setting.map_annot_oblique`\r\n- However, in addition to that bitflag, _gmt_proj_setup_ will add these assignments for all the miscellaneous projections (Hammer, Sinusoidal etc): `GMT->current.map.frame.horizontal = 2; ` This means \"force annotations to be horizontal at the S and N borders\".\r\n- The `frame.horizontal `doubles up what **MAP_ANNOT_OBLIQUE** does due to this check at the top of _gmt_map_basemap_:\r\n```\r\nif (GMT->current.setting.map_annot_oblique & GMT_OBL_ANNOT_LON_HORIZONTAL) GMT->current.map.frame.horizontal = 2;\r\nif (GMT->current.map.frame.horizontal == 2) GMT->current.setting.map_annot_oblique |= GMT_OBL_ANNOT_LON_HORIZONTAL;\r\n```\r\nSo `current.setting.map_annot_oblique` ends up being changed due to `current.map.frame.horizontal` even though it has nothing to do with being oblique.\r\n- Even projections that are neither oblique nor miscellaneous still obey the **MAP_ANNOT_OBLIQUE** setting, such as seen in  `gmt basemap -R-30/30/40/60 -JL0/50/40/60/15c -Baf -pdf t --MAP_ANNOT_OBLIQUE=lon_horizontal`\r\n- Finally, **subplot** decides that y-annotations should be parallel to the frame and will update _map_annot_oblique_ so that we get this effect:` gmt basemap -R-30/30/0/40 -JM15c -Baf -pdf t --MAP_ANNOT_OBLIQUE=lat_parallel`. So we don't want to loose that capability.\r\n\r\nThe problem I see here is not so much that the user might want that last effect and GMT can deliver it.  The problem is that if we decide a particular choice of bits for **MAP_ANNOT_OBLIQUE** should become new defaults (e.g., **lon_horizontal,lat_horizontal,tick_extend**), they propagate to all these other projections were we do not want to change the default. Finally, when GMT parses **MAP_ANNOT_OBLIQUE** it does not yet know what projection will be applied, so we cannot enforce some rule at that point.\r\n\r\nMaybe this strategy could work:\r\n\r\n1. Let **MAP_ANNOT_OBLIQUE** get a new default meant for oblique projections, say **lon_horizontal,lat_horizontal,tick_extend**.\r\n2. When _gmt_proj_setup_ is called, let it (1) remove/reset these flags if they are inappropriate for the selected projection (e.g., Conic, Cylindrical) and it is _not_ a subplot, and then (2) set the `frame.horizontal = 2` if needed by that projection - this will again affect `map_annot_oblique` later one as we see above.\r\n3. I think we may need to distinguish between using a default _map_annot_oblique_ or one that was user-supplied.  If the user supplied a specific combo then we should _not_ reset it.\r\n\r\nSo pretty messy implementation, unfortunately.  And of course **MAP_ANNOT_ORTHO** is there to only apply to Cartesian axes.  Perhaps it could be helpful to actually rename **MAP_ANNOT_OBLIQUE** to something different, say **MAP_ANNOT_TYPE** so that we at least don't have to explain why it applies to non-oblique projections as well?  Thoughts, @meghanrjones ?\r\n",
            "created_at": "2021-03-01T22:02:58Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-788331285",
            "id": 788331285,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODMzMTI4NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788331285/reactions"
            },
            "updated_at": "2021-03-01T22:02:58Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788331285",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, a bit messy. Regarding the parameter name, I do not think it is necessary to rename **MAP_ANNOT_OBLIQUE** because so many of these parameters are **MAP_** parameters that also apply to non-maps so we're already relying on some extrapolation here.\r\n\r\nDo you think that this should be considered a bug that needs to be fixed regardless of whether new defaults are set for MAP_ANNOT_OBLIQUE? If not, I think we should review some maps that use oblique projections before taking the effort to change this. If it should be corrected regardless, then this implementation seems reasonable. ",
            "created_at": "2021-03-01T23:31:08Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-788394221",
            "id": 788394221,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODM5NDIyMQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788394221/reactions"
            },
            "updated_at": "2021-03-01T23:31:08Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788394221",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
                "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
                "followers_url": "https://api.github.com/users/maxrjones/followers",
                "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
                "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/maxrjones",
                "id": 14077947,
                "login": "maxrjones",
                "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
                "organizations_url": "https://api.github.com/users/maxrjones/orgs",
                "received_events_url": "https://api.github.com/users/maxrjones/received_events",
                "repos_url": "https://api.github.com/users/maxrjones/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/maxrjones"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The only bug I see really is what happened if I change the default - it had all these unintended consequences for other projections.  If the user want to plot horizontal longitude on a conic map then he should be allowed to even though I think it looks ugly.  But it should not just pop up because we changed the OBLIQUE default.  So I think I can tell if OBLIQUE was updated via file or --par=var and do different things internally.",
            "created_at": "2021-03-02T00:38:09Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-788447250",
            "id": 788447250,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODQ0NzI1MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788447250/reactions"
            },
            "updated_at": "2021-03-02T00:38:09Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/788447250",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I suspect we can close this issue now, @meghanrjones ?",
            "created_at": "2021-03-17T13:49:47Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-801096005",
            "id": 801096005,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTA5NjAwNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/801096005/reactions"
            },
            "updated_at": "2021-03-17T13:49:47Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/801096005",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, addressed in #4890 and #3344 ",
            "created_at": "2021-03-17T13:59:54Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859#issuecomment-801103959",
            "id": 801103959,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTEwMzk1OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/801103959/reactions"
            },
            "updated_at": "2021-03-17T13:59:54Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/801103959",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
                "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
                "followers_url": "https://api.github.com/users/maxrjones/followers",
                "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
                "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/maxrjones",
                "id": 14077947,
                "login": "maxrjones",
                "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
                "organizations_url": "https://api.github.com/users/maxrjones/orgs",
                "received_events_url": "https://api.github.com/users/maxrjones/received_events",
                "repos_url": "https://api.github.com/users/maxrjones/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/maxrjones"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859/comments",
    "created_at": "2021-02-26T00:20:30Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/4859",
    "id": 816914510,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4MTY5MTQ1MTA=",
    "number": 4859,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859/timeline",
    "title": "Only consider MAP_ANNOT_OBLIQUE settings for -RLLX/LLY/URX/URY+r specifications",
    "updated_at": "2021-03-17T13:59:55Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/4859",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
        "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
        "followers_url": "https://api.github.com/users/maxrjones/followers",
        "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
        "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/maxrjones",
        "id": 14077947,
        "login": "maxrjones",
        "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
        "organizations_url": "https://api.github.com/users/maxrjones/orgs",
        "received_events_url": "https://api.github.com/users/maxrjones/received_events",
        "repos_url": "https://api.github.com/users/maxrjones/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/maxrjones"
    }
}