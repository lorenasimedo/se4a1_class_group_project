{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "I'm trying to fix a `pathlib` bug of plot and plot3d in #1831 and find that `which()`, `image()` and `legend` also don't support `pathlib.Path` inputs.\r\n\r\nTo reproduce the issue, run:\r\n```\r\n>>> import pygmt\r\n>>> from pathlib import Path\r\n\r\n>>> pygmt.which(Path(\"abc.txt\"))\r\n\r\n>>> fig = pygmt.Figure()\r\n>>> fig.image(Path(\"abc.png\"))\r\n\r\n>>> fig.legend(spec=Path(\"legend.txt\"))\r\n```\r\nThe error message is: `TypeError: sequence item 0: expected str instance, PosixPath found`.\r\n\r\nOther functions work because their input file is wrapped in a context manager, like\r\n\r\nhttps://github.com/GenericMappingTools/pygmt/blob/8fe2d331f04d21fc1ad731dea983c1701c42a662/pygmt/src/histogram.py#L150-L152\r\n\r\nTo fix the bug, the simplest solution is changing input file to a string type, for example, changing `fname` to `str(fname)`. Do anyone have better and more general solutions?",
    "closed_at": "2022-04-04T07:27:51Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
        "events_url": "https://api.github.com/users/seisman/events{/privacy}",
        "followers_url": "https://api.github.com/users/seisman/followers",
        "following_url": "https://api.github.com/users/seisman/following{/other_user}",
        "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/seisman",
        "id": 3974108,
        "login": "seisman",
        "node_id": "MDQ6VXNlcjM5NzQxMDg=",
        "organizations_url": "https://api.github.com/users/seisman/orgs",
        "received_events_url": "https://api.github.com/users/seisman/received_events",
        "repos_url": "https://api.github.com/users/seisman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/seisman"
    },
    "comments": 5,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "In `pygmt.which()` or other functions, we build the argument string using the following code:\r\nhttps://github.com/GenericMappingTools/pygmt/blob/813142bbc2ef84b49cff91f20dcb99999ce067d6/pygmt/src/which.py#L63\r\n\r\nPerhaps we should refactor the `build_arg_string` function to:\r\n```\r\nbuild_arg_string(kwargs, infile=None, outfile=None)\r\n```\r\nand in `build_arg_string`, we always make sure that `infile` and `outfile` are converted to string type.",
            "created_at": "2022-03-19T09:15:35Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832#issuecomment-1072974748",
            "id": 1072974748,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
            "node_id": "IC_kwDOBRZfO84_9Euc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1072974748/reactions"
            },
            "updated_at": "2022-03-19T09:15:35Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1072974748",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Does anyone have comments on the proposed refactor in #1837?",
            "created_at": "2022-03-29T02:53:59Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832#issuecomment-1081346426",
            "id": 1081346426,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
            "node_id": "IC_kwDOBRZfO85AdAl6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1081346426/reactions"
            },
            "updated_at": "2022-03-29T02:53:59Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1081346426",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Does anyone have comments on the proposed refactor in https://github.com/GenericMappingTools/pygmt/pull/1837?\r\n\r\nI like the idea in general. I would rather that all modules handle input and output using the same strategy rather than only applying this code structure to these three methods/functions. Would you be open to a larger refactor using the new ``build_arg_string`` input and output arguments in other functions/methods for consistency?\r\n\r\nA couple other questions:\r\n1. Should we do any type checking before converting to a string?\r\n2. The only reference pathlib.Path objects in our docs are the changelog, virtualfile_from_data, and load_dataarray. Should we add this as an accepted input if it is something that we intend to support (as suggested by this issue)? This is something that is explicitly stated in the xarray and pandas docs when available as an input type (e.g., https://xarray.pydata.org/en/stable/generated/xarray.open_dataset.html#xarray.open_dataset and https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.read_csv.html)",
            "created_at": "2022-03-29T22:10:49Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832#issuecomment-1082419899",
            "id": 1082419899,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
            "node_id": "IC_kwDOBRZfO85AhGq7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1082419899/reactions"
            },
            "updated_at": "2022-03-29T22:10:49Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1082419899",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14077947?v=4",
                "events_url": "https://api.github.com/users/maxrjones/events{/privacy}",
                "followers_url": "https://api.github.com/users/maxrjones/followers",
                "following_url": "https://api.github.com/users/maxrjones/following{/other_user}",
                "gists_url": "https://api.github.com/users/maxrjones/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/maxrjones",
                "id": 14077947,
                "login": "maxrjones",
                "node_id": "MDQ6VXNlcjE0MDc3OTQ3",
                "organizations_url": "https://api.github.com/users/maxrjones/orgs",
                "received_events_url": "https://api.github.com/users/maxrjones/received_events",
                "repos_url": "https://api.github.com/users/maxrjones/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/maxrjones/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/maxrjones/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/maxrjones"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > Does anyone have comments on the proposed refactor in #1837?\r\n> \r\n> I like the idea in general. I would rather that all modules handle input and output using the same strategy rather than only applying this code structure to these three methods/functions. Would you be open to a larger refactor using the new `build_arg_string` input and output arguments in other functions/methods for consistency?\r\n\r\nYes, the plan is to refactor `build_arg_string` in all functions.\r\n\r\n> 1. Should we do any type checking before converting to a string?\r\n\r\nPerhaps not necessary now. From what I see, infile/outfile is either a string, a pathlib.Path object or a virtual file (also a string), so converting everything to a string looks OK. \r\n\r\n> 2. The only reference pathlib.Path objects in our docs are the changelog, virtualfile_from_data, and load_dataarray. Should we add this as an accepted input if it is something that we intend to support (as suggested by this issue)? This is something that is explicitly stated in the xarray and pandas docs when available as an input type (e.g., [xarray.pydata.org/en/stable/generated/xarray.open_dataset.html#xarray.open_dataset](https://xarray.pydata.org/en/stable/generated/xarray.open_dataset.html#xarray.open_dataset) and [pandas.pydata.org/pandas-docs/dev/reference/api/pandas.read_csv.html](https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.read_csv.html))\r\n\r\nMention `pathlib.Path` in docstrings sounds a good idea. BTW, the planned tutorial at https://github.com/GenericMappingTools/pygmt/issues/1268 will also mention `pathlib.Path` support. \r\n\r\n",
            "created_at": "2022-03-30T02:58:43Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832#issuecomment-1082569245",
            "id": 1082569245,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
            "node_id": "IC_kwDOBRZfO85AhrId",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1082569245/reactions"
            },
            "updated_at": "2022-03-30T02:58:43Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1082569245",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closed by #1837.",
            "created_at": "2022-04-04T07:27:51Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832#issuecomment-1087210370",
            "id": 1087210370,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
            "node_id": "IC_kwDOBRZfO85AzYOC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1087210370/reactions"
            },
            "updated_at": "2022-04-04T07:27:51Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/1087210370",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
                "events_url": "https://api.github.com/users/seisman/events{/privacy}",
                "followers_url": "https://api.github.com/users/seisman/followers",
                "following_url": "https://api.github.com/users/seisman/following{/other_user}",
                "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seisman",
                "id": 3974108,
                "login": "seisman",
                "node_id": "MDQ6VXNlcjM5NzQxMDg=",
                "organizations_url": "https://api.github.com/users/seisman/orgs",
                "received_events_url": "https://api.github.com/users/seisman/received_events",
                "repos_url": "https://api.github.com/users/seisman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seisman"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832/comments",
    "created_at": "2022-03-18T14:28:02Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832/events",
    "html_url": "https://github.com/GenericMappingTools/pygmt/issues/1832",
    "id": 1173654560,
    "labels": [
        {
            "color": "ee0701",
            "default": true,
            "description": "Something isn't working",
            "id": 563309827,
            "name": "bug",
            "node_id": "MDU6TGFiZWw1NjMzMDk4Mjc=",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2022-04-25T05:58:43Z",
        "closed_issues": 40,
        "created_at": "2022-03-11T03:50:45Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4",
            "events_url": "https://api.github.com/users/weiji14/events{/privacy}",
            "followers_url": "https://api.github.com/users/weiji14/followers",
            "following_url": "https://api.github.com/users/weiji14/following{/other_user}",
            "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/weiji14",
            "id": 23487320,
            "login": "weiji14",
            "node_id": "MDQ6VXNlcjIzNDg3MzIw",
            "organizations_url": "https://api.github.com/users/weiji14/orgs",
            "received_events_url": "https://api.github.com/users/weiji14/received_events",
            "repos_url": "https://api.github.com/users/weiji14/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/weiji14"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/GenericMappingTools/pygmt/milestone/13",
        "id": 7756455,
        "labels_url": "https://api.github.com/repos/GenericMappingTools/pygmt/milestones/13/labels",
        "node_id": "MI_kwDOBRZfO84Adlqn",
        "number": 13,
        "open_issues": 0,
        "state": "closed",
        "title": "0.6.1",
        "updated_at": "2022-04-25T05:58:43Z",
        "url": "https://api.github.com/repos/GenericMappingTools/pygmt/milestones/13"
    },
    "node_id": "I_kwDOBRZfO85F9Iwg",
    "number": 1832,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/pygmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832/timeline",
    "title": "which(), image() and legend() don't support pathlib.Path inputs",
    "updated_at": "2022-04-04T07:27:51Z",
    "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/1832",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3974108?v=4",
        "events_url": "https://api.github.com/users/seisman/events{/privacy}",
        "followers_url": "https://api.github.com/users/seisman/followers",
        "following_url": "https://api.github.com/users/seisman/following{/other_user}",
        "gists_url": "https://api.github.com/users/seisman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/seisman",
        "id": 3974108,
        "login": "seisman",
        "node_id": "MDQ6VXNlcjM5NzQxMDg=",
        "organizations_url": "https://api.github.com/users/seisman/orgs",
        "received_events_url": "https://api.github.com/users/seisman/received_events",
        "repos_url": "https://api.github.com/users/seisman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/seisman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/seisman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/seisman"
    }
}