{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4",
        "events_url": "https://api.github.com/users/weiji14/events{/privacy}",
        "followers_url": "https://api.github.com/users/weiji14/followers",
        "following_url": "https://api.github.com/users/weiji14/following{/other_user}",
        "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/weiji14",
        "id": 23487320,
        "login": "weiji14",
        "node_id": "MDQ6VXNlcjIzNDg3MzIw",
        "organizations_url": "https://api.github.com/users/weiji14/orgs",
        "received_events_url": "https://api.github.com/users/weiji14/received_events",
        "repos_url": "https://api.github.com/users/weiji14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/weiji14"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4",
            "events_url": "https://api.github.com/users/weiji14/events{/privacy}",
            "followers_url": "https://api.github.com/users/weiji14/followers",
            "following_url": "https://api.github.com/users/weiji14/following{/other_user}",
            "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/weiji14",
            "id": 23487320,
            "login": "weiji14",
            "node_id": "MDQ6VXNlcjIzNDg3MzIw",
            "organizations_url": "https://api.github.com/users/weiji14/orgs",
            "received_events_url": "https://api.github.com/users/weiji14/received_events",
            "repos_url": "https://api.github.com/users/weiji14/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/weiji14"
        }
    ],
    "author_association": "NONE",
    "body": "Although the docs says pygmt.surface returns a `xarray.DataArray`, it actually returns an `xarray.Dataset`. This is incompatible to what grdtrack expects as input, making  it not possible to sample an internally created grid unless you write it out to file, then reread it, or do some finagling.\r\n\r\n```\r\nimport pygmt\r\nbathy= pygmt.datasets.load_sample_bathymetry()\r\n\r\nxmin = bathy['longitude'].min()\r\nxmax = bathy['longitude'].max()\r\nymin = bathy['latitude'].min()\r\nymax = bathy['latitude'].max()\r\n\r\nR = '/'.join([str(xmin),str(xmax),str(ymin),str(ymax)])\r\nI='.02'\r\n\r\nx = bathy['longitude']\r\ny = bathy['latitude']\r\nz = bathy['bathymetry']\r\n\r\nDEPTH_SURF = pygmt.surface(x = x, y = y, z = z, R = R, I = I) \r\n```\r\n```\r\ntype(DEPTH_SURF)\r\nxarray.core.dataset.Dataset\r\n```\r\n```\r\npygmt.grdtrack(bathy,DEPTH_SURF,newcolname='sampled')\r\n```\r\n**GMTInvalidInput: Unrecognized data type xarray.core.dataset.Dataset**\r\n<br>\r\n\r\nThe work around is to convert the dataset to a dataarray;\r\n```\r\ndepth_array=DEPTH_SURF.to_array(dim='z')\r\n```\r\nAlthough this doesn't work directly, since it incorrectly broadcasts the array size;\r\n```\r\npygmt.grdtrack(bathy,depth_array,newcolname='sampled')\r\n```\r\n**GMTInvalidInput: Invalid number of grid dimensions '3'. Must be 2.**\r\n```\r\ndepth_array.values.shape\r\n(1, 501, 486)\r\n```\r\n<br>\r\n\r\nTo get it to work, you have to use a slice of the dataarray;\r\n```\r\npygmt.grdtrack(bathy,depth_array[0],newcolname='sampled')\r\n\r\n       longitude  latitude  bathymetry      sampled\r\n0      245.00891  27.49555        -636  -690.523706\r\n1      245.01201  27.49286        -655  -697.038135\r\n2      245.01512  27.49016        -710  -703.130958\r\n...          ...       ...         ...          ...\r\n82968  245.00681  24.61633       -3852 -3861.402543\r\n82969  245.00337  24.61995       -3889 -3869.346273\r\n```\r\n\r\nUnless I'm missing something obvious here and this is the expected behavior?\r\n\r\n\r\n\r\n\r\n",
    "closed_at": "2020-04-09T21:48:43Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4",
        "events_url": "https://api.github.com/users/weiji14/events{/privacy}",
        "followers_url": "https://api.github.com/users/weiji14/followers",
        "following_url": "https://api.github.com/users/weiji14/following{/other_user}",
        "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/weiji14",
        "id": 23487320,
        "login": "weiji14",
        "node_id": "MDQ6VXNlcjIzNDg3MzIw",
        "organizations_url": "https://api.github.com/users/weiji14/orgs",
        "received_events_url": "https://api.github.com/users/weiji14/received_events",
        "repos_url": "https://api.github.com/users/weiji14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/weiji14"
    },
    "comments": 2,
    "comments_content": [
        {
            "author_association": "NONE",
            "body": "\ud83d\udc4b Thanks for opening your first issue here! Please make sure you filled out the template with as much detail as possible. You might also want to take a look at our [contributing guidelines](https://github.com/GenericMappingTools/pygmt/blob/master/CONTRIBUTING.md) and [code of conduct](https://github.com/GenericMappingTools/pygmt/blob/master/CODE_OF_CONDUCT.md).\n",
            "created_at": "2020-04-09T05:29:22Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/407#issuecomment-611336339",
            "id": 611336339,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTMzNjMzOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/611336339/reactions"
            },
            "updated_at": "2020-04-09T05:29:22Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/611336339",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/4141?v=4",
                "events_url": "https://api.github.com/users/welcome%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/welcome%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/welcome%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/welcome%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/welcome",
                "id": 30606887,
                "login": "welcome[bot]",
                "node_id": "MDM6Qm90MzA2MDY4ODc=",
                "organizations_url": "https://api.github.com/users/welcome%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/welcome%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/welcome%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/welcome%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/welcome%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/welcome%5Bbot%5D"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Oops, you're right, it *should* return an `xr.DataArray` instead. I'll work on a fix for it now.\r\n\r\nIn the meantime, you can use `DEPTH_SURF.z` to access the `xr.DataArray` inside the `xr.Dataset`.",
            "created_at": "2020-04-09T07:13:16Z",
            "html_url": "https://github.com/GenericMappingTools/pygmt/issues/407#issuecomment-611370296",
            "id": 611370296,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407",
            "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTM3MDI5Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/611370296/reactions"
            },
            "updated_at": "2020-04-09T07:21:33Z",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/comments/611370296",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4",
                "events_url": "https://api.github.com/users/weiji14/events{/privacy}",
                "followers_url": "https://api.github.com/users/weiji14/followers",
                "following_url": "https://api.github.com/users/weiji14/following{/other_user}",
                "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/weiji14",
                "id": 23487320,
                "login": "weiji14",
                "node_id": "MDQ6VXNlcjIzNDg3MzIw",
                "organizations_url": "https://api.github.com/users/weiji14/orgs",
                "received_events_url": "https://api.github.com/users/weiji14/received_events",
                "repos_url": "https://api.github.com/users/weiji14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/weiji14"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407/comments",
    "created_at": "2020-04-09T05:29:21Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407/events",
    "html_url": "https://github.com/GenericMappingTools/pygmt/issues/407",
    "id": 597031583,
    "labels": [
        {
            "color": "ee0701",
            "default": true,
            "description": "Something isn't working",
            "id": 563309827,
            "name": "bug",
            "node_id": "MDU6TGFiZWw1NjMzMDk4Mjc=",
            "url": "https://api.github.com/repos/GenericMappingTools/pygmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU1OTcwMzE1ODM=",
    "number": 407,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/pygmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407/timeline",
    "title": "grdtrack/surface/others?, incompatible data types",
    "updated_at": "2020-04-09T21:48:43Z",
    "url": "https://api.github.com/repos/GenericMappingTools/pygmt/issues/407",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6644367?v=4",
        "events_url": "https://api.github.com/users/ashtonflinders/events{/privacy}",
        "followers_url": "https://api.github.com/users/ashtonflinders/followers",
        "following_url": "https://api.github.com/users/ashtonflinders/following{/other_user}",
        "gists_url": "https://api.github.com/users/ashtonflinders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ashtonflinders",
        "id": 6644367,
        "login": "ashtonflinders",
        "node_id": "MDQ6VXNlcjY2NDQzNjc=",
        "organizations_url": "https://api.github.com/users/ashtonflinders/orgs",
        "received_events_url": "https://api.github.com/users/ashtonflinders/received_events",
        "repos_url": "https://api.github.com/users/ashtonflinders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ashtonflinders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ashtonflinders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ashtonflinders"
    }
}