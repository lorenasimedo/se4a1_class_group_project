{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
        "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
        "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
        "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
        "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/FrancescoCasalegno",
        "id": 17013890,
        "login": "FrancescoCasalegno",
        "node_id": "MDQ6VXNlcjE3MDEzODkw",
        "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
        "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
        "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/FrancescoCasalegno"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
            "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
            "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
            "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
            "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/FrancescoCasalegno",
            "id": 17013890,
            "login": "FrancescoCasalegno",
            "node_id": "MDQ6VXNlcjE3MDEzODkw",
            "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
            "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
            "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/FrancescoCasalegno"
        }
    ],
    "author_association": "COLLABORATOR",
    "body": "The DVC evaluation is crashing. After investigation, the bug was introduced by #348.\r\n\r\nThe bug:\r\n```\r\nTraceback (most recent call last):\r\n  File \"eval.py\", line 111, in <module>\r\n    main()\r\n  File \"eval.py\", line 107, in main\r\n    json.dump(all_metrics_dict, f)\r\n  File \"/opt/conda/lib/python3.8/json/__init__.py\", line 179, in dump\r\n    for chunk in iterable:\r\n  File \"/opt/conda/lib/python3.8/json/encoder.py\", line 431, in _iterencode\r\n    yield from _iterencode_dict(o, _current_indent_level)\r\n  File \"/opt/conda/lib/python3.8/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/opt/conda/lib/python3.8/json/encoder.py\", line 438, in _iterencode\r\n    o = _default(o)\r\n  File \"/opt/conda/lib/python3.8/json/encoder.py\", line 179, in default\r\n    raise TypeError(f'Object of type {o.__class__.__name__} '\r\nTypeError: Object of type int64 is not JSON serializable\r\n```\r\n\r\nTo reproduce:\r\n\r\n```\r\n# For the bug introduced by #348, use 0bb500551b1b7c6f5bb9228335aa4df30a654e9c.\r\n# For the working code __before__ #348, use b9c886966ca4d893b41457a17262e198e3ba7f03.\r\nexport COMMIT=...\r\n\r\ngit clone https://github.com/BlueBrain/Search\r\ncd Search/\r\n\r\n# Change <image> and <container>.\r\ndocker build -f data_and_models/pipelines/ner/Dockerfile --build-arg BBS_REVISION=$COMMIT -t <image> .\r\ndocker run -it --rm -v /raid:/raid --name <container> <image>\r\n\r\ngit checkout $COMMIT\r\ngit checkout -- data_and_models/pipelines/ner/dvc.lock\r\n\r\ncd data_and_models/pipelines/ner/\r\ndvc pull --with-deps evaluation@organism\r\ndvc repro -fs evaluation@organism\r\n```\r\n\r\n_Originally posted by @pafonta in https://github.com/BlueBrain/Search/issues/335#issuecomment-833506692_",
    "closed_at": "2021-05-07T13:20:02Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
        "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
        "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
        "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
        "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/FrancescoCasalegno",
        "id": 17013890,
        "login": "FrancescoCasalegno",
        "node_id": "MDQ6VXNlcjE3MDEzODkw",
        "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
        "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
        "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/FrancescoCasalegno"
    },
    "comments": 0,
    "comments_content": [],
    "comments_url": "https://api.github.com/repos/BlueBrain/Search/issues/361/comments",
    "created_at": "2021-05-07T11:12:57Z",
    "events_url": "https://api.github.com/repos/BlueBrain/Search/issues/361/events",
    "html_url": "https://github.com/BlueBrain/Search/issues/361",
    "id": 878800609,
    "labels": [
        {
            "color": "d73a4a",
            "default": false,
            "description": "Something isn't working",
            "id": 1938483675,
            "name": "\ud83d\udc1b bug fix",
            "node_id": "MDU6TGFiZWwxOTM4NDgzNjc1",
            "url": "https://api.github.com/repos/BlueBrain/Search/labels/%F0%9F%90%9B%20bug%20fix"
        }
    ],
    "labels_url": "https://api.github.com/repos/BlueBrain/Search/issues/361/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4Nzg4MDA2MDk=",
    "number": 361,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/BlueBrain/Search/issues/361/reactions"
    },
    "repository_url": "https://api.github.com/repos/BlueBrain/Search",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/BlueBrain/Search/issues/361/timeline",
    "title": "DVC eval crashes \"int64 not JSON serializable\"",
    "updated_at": "2021-05-07T13:20:02Z",
    "url": "https://api.github.com/repos/BlueBrain/Search/issues/361",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/17013890?v=4",
        "events_url": "https://api.github.com/users/FrancescoCasalegno/events{/privacy}",
        "followers_url": "https://api.github.com/users/FrancescoCasalegno/followers",
        "following_url": "https://api.github.com/users/FrancescoCasalegno/following{/other_user}",
        "gists_url": "https://api.github.com/users/FrancescoCasalegno/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/FrancescoCasalegno",
        "id": 17013890,
        "login": "FrancescoCasalegno",
        "node_id": "MDQ6VXNlcjE3MDEzODkw",
        "organizations_url": "https://api.github.com/users/FrancescoCasalegno/orgs",
        "received_events_url": "https://api.github.com/users/FrancescoCasalegno/received_events",
        "repos_url": "https://api.github.com/users/FrancescoCasalegno/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/FrancescoCasalegno/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/FrancescoCasalegno/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/FrancescoCasalegno"
    }
}