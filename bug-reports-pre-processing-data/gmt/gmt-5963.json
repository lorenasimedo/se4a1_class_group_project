{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Tests like this now fail (for some time but haven't pay attention to it before)\r\n```\r\nG,L = blockmode(d, region=[0 2 0 2], inc=1, fields=\"z,l\", reg=true);\r\n```\r\nThe problem is that ``gmt_api.c``, L#12940 have this\r\n```\r\n\tif (opt->arg[0]) {\t/* Gave -A: Determine how many output grids are requested */\r\n\t\tfor (k = 1, len = 0; len < strlen (opt->arg); len++) if (opt->arg[len] == ',') k++;\r\n\t}\r\n\tif ((opt = GMT_Find_Option (API, 'G', *head))) {\t/* This is a problem unless -G actually sent in a file name */\r\n\t\tif (opt->arg[0] == '\\0') {\t/* Cannot just give -G here */\r\n\t\t\tGMT_Report (API, GMT_MSG_ERROR, \"GMT_Encode_Options: %s cannot set -G when called externally\\n\", module);\r\n\t\t\treturn_null (NULL, GMT_NOT_A_VALID_OPTION);\r\n\t\t}\r\n\t\telse\t/* Gave a (presumably) file argument, no need to add -G? */\r\n\t\t\tk = 0;\r\n\t}\r\n\telse\t/* No -A or -G; default is to just add the z grid via -G?  */\r\n\t\tk = 1;\r\n```\r\nSo **k** is reset such that it never > 1",
    "closed_at": "2021-11-09T20:50:44Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
        "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
        "followers_url": "https://api.github.com/users/PaulWessel/followers",
        "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
        "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/PaulWessel",
        "id": 26473567,
        "login": "PaulWessel",
        "node_id": "MDQ6VXNlcjI2NDczNTY3",
        "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
        "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
        "repos_url": "https://api.github.com/users/PaulWessel/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/PaulWessel"
    },
    "comments": 2,
    "comments_content": [
        {
            "author_association": "MEMBER",
            "body": "Hm, yes.  So in your case there is -A but no -G and we want to find k.  Should be like this, no?\r\n\r\n```\r\n\t\tk = 0;\t/* Make sure we initialize this first */\r\n\t\tif (opt->arg[0]) {\t/* Gave -A: Determine how many output grids are requested */\r\n\t\t\tfor (k = 1, len = 0; len < strlen (opt->arg); len++) if (opt->arg[len] == ',') k++;\r\n\t\t}\r\n\t\t/* Here k has the right number of fields, or it is 0 if no -A */\r\n\t\tif ((opt = GMT_Find_Option (API, 'G', *head))) {\t/* This is a problem unless -G actually sent in a file name */\r\n\t\t\tif (opt->arg[0] == '\\0') {\t/* Cannot just give -G here */\r\n\t\t\t\tGMT_Report (API, GMT_MSG_ERROR, \"GMT_Encode_Options: %s cannot set -G when called externally\\n\", module);\r\n\t\t\t\treturn_null (NULL, GMT_NOT_A_VALID_OPTION);\r\n\t\t\t}\r\n\t\t\telse\t/* Gave a (presumably) file argument, no need to add -G? */\r\n\t\t\t\tk = 0;\r\n\t\t}\r\n\t\telse if (k == 0)\t/* No -A or -G; default is to just add the z grid via -G?  */\r\n\t\t\tk = 1;\r\n\t\twhile (k) {\t/* Add -G? option k times */\r\n\t\t\tnew_ptr = GMT_Make_Option (API, 'G', \"?\");\t/* Create new output grid option(s) with filename \"?\" */\r\n\t\t\t*head = GMT_Append_Option (API, new_ptr, *head);\r\n\t\t\tk--;\r\n\t\t}\r\n\t\tdeactivate_output = true;\t/* Turn off implicit table output since only secondary -G output(s) is in effect */\r\n```\r\n\r\nI.e., the difference is the check that k == 0 at the end there, which should mean once, otherwise k times. hes?\r\n",
            "created_at": "2021-11-09T01:57:15Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5963#issuecomment-963741969",
            "id": 963741969,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963",
            "node_id": "IC_kwDOCJzWHc45cYkR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/963741969/reactions"
            },
            "updated_at": "2021-11-09T01:57:15Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/963741969",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26473567?v=4",
                "events_url": "https://api.github.com/users/PaulWessel/events{/privacy}",
                "followers_url": "https://api.github.com/users/PaulWessel/followers",
                "following_url": "https://api.github.com/users/PaulWessel/following{/other_user}",
                "gists_url": "https://api.github.com/users/PaulWessel/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/PaulWessel",
                "id": 26473567,
                "login": "PaulWessel",
                "node_id": "MDQ6VXNlcjI2NDczNTY3",
                "organizations_url": "https://api.github.com/users/PaulWessel/orgs",
                "received_events_url": "https://api.github.com/users/PaulWessel/received_events",
                "repos_url": "https://api.github.com/users/PaulWessel/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/PaulWessel/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/PaulWessel/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/PaulWessel"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Will read this tomorrow. This test uses to pass. \n\nSent from my iDedo\n\n> No dia 09/11/2021, \u00e0s 01:57, Paul Wessel ***@***.***> escreveu:\n> \n> \ufeff\n> Hm, yes. So in your case there is -A but no -G and we want to find k. Should be like this, no?\n> \n> \t\tk = 0;\t/* Make sure we initialize this first */\n> \t\tif (opt->arg[0]) {\t/* Gave -A: Determine how many output grids are requested */\n> \t\t\tfor (k = 1, len = 0; len < strlen (opt->arg); len++) if (opt->arg[len] == ',') k++;\n> \t\t}\n> \t\t/* Here k has the right number of fields, or it is 0 if no -A */\n> \t\tif ((opt = GMT_Find_Option (API, 'G', *head))) {\t/* This is a problem unless -G actually sent in a file name */\n> \t\t\tif (opt->arg[0] == '\\0') {\t/* Cannot just give -G here */\n> \t\t\t\tGMT_Report (API, GMT_MSG_ERROR, \"GMT_Encode_Options: %s cannot set -G when called externally\\n\", module);\n> \t\t\t\treturn_null (NULL, GMT_NOT_A_VALID_OPTION);\n> \t\t\t}\n> \t\t\telse\t/* Gave a (presumably) file argument, no need to add -G? */\n> \t\t\t\tk = 0;\n> \t\t}\n> \t\telse if (k == 0)\t/* No -A or -G; default is to just add the z grid via -G?  */\n> \t\t\tk = 1;\n> \t\twhile (k) {\t/* Add -G? option k times */\n> \t\t\tnew_ptr = GMT_Make_Option (API, 'G', \"?\");\t/* Create new output grid option(s) with filename \"?\" */\n> \t\t\t*head = GMT_Append_Option (API, new_ptr, *head);\n> \t\t\tk--;\n> \t\t}\n> \t\tdeactivate_output = true;\t/* Turn off implicit table output since only secondary -G output(s) is in effect */\n> I.e., the difference is the check that k == 0 at the end there, which should mean once, otherwise k times. hes?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> Triage notifications on the go with GitHub Mobile for iOS or Android. \n",
            "created_at": "2021-11-09T02:03:15Z",
            "html_url": "https://github.com/GenericMappingTools/gmt/issues/5963#issuecomment-963744470",
            "id": 963744470,
            "issue_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963",
            "node_id": "IC_kwDOCJzWHc45cZLW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/963744470/reactions"
            },
            "updated_at": "2021-11-09T02:03:15Z",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/comments/963744470",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/537321?v=4",
                "events_url": "https://api.github.com/users/joa-quim/events{/privacy}",
                "followers_url": "https://api.github.com/users/joa-quim/followers",
                "following_url": "https://api.github.com/users/joa-quim/following{/other_user}",
                "gists_url": "https://api.github.com/users/joa-quim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/joa-quim",
                "id": 537321,
                "login": "joa-quim",
                "node_id": "MDQ6VXNlcjUzNzMyMQ==",
                "organizations_url": "https://api.github.com/users/joa-quim/orgs",
                "received_events_url": "https://api.github.com/users/joa-quim/received_events",
                "repos_url": "https://api.github.com/users/joa-quim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/joa-quim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/joa-quim/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/joa-quim"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963/comments",
    "created_at": "2021-11-09T01:18:32Z",
    "events_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963/events",
    "html_url": "https://github.com/GenericMappingTools/gmt/issues/5963",
    "id": 1048084888,
    "labels": [
        {
            "color": "d73a4a",
            "default": true,
            "description": "Something isn't working",
            "id": 1022239695,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxMDIyMjM5Njk1",
            "url": "https://api.github.com/repos/GenericMappingTools/gmt/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOCJzWHc4-eIGY",
    "number": 5963,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963/reactions"
    },
    "repository_url": "https://api.github.com/repos/GenericMappingTools/gmt",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963/timeline",
    "title": "Multi grids otput for the block* are broken in Julia/MEX",
    "updated_at": "2021-11-09T20:50:44Z",
    "url": "https://api.github.com/repos/GenericMappingTools/gmt/issues/5963",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/537321?v=4",
        "events_url": "https://api.github.com/users/joa-quim/events{/privacy}",
        "followers_url": "https://api.github.com/users/joa-quim/followers",
        "following_url": "https://api.github.com/users/joa-quim/following{/other_user}",
        "gists_url": "https://api.github.com/users/joa-quim/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/joa-quim",
        "id": 537321,
        "login": "joa-quim",
        "node_id": "MDQ6VXNlcjUzNzMyMQ==",
        "organizations_url": "https://api.github.com/users/joa-quim/orgs",
        "received_events_url": "https://api.github.com/users/joa-quim/received_events",
        "repos_url": "https://api.github.com/users/joa-quim/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/joa-quim/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/joa-quim/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/joa-quim"
    }
}